<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>The Reluctant Seller | Interactive Sales Simulator</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

  :root {
    --system-bg: #F2F2F7;
    --label-primary: #000000;
    --label-secondary: rgba(60,60,67,0.6);
    --label-tertiary: rgba(60,60,67,0.3);
    --fill-primary: rgba(120,120,128,0.2);
    --fill-secondary: rgba(120,120,128,0.16);
    --fill-tertiary: rgba(120,120,128,0.12);
    --separator: rgba(60,60,67,0.12);
    --system-blue: #007AFF;
    --system-green: #34C759;
    --system-red: #FF3B30;
    --system-orange: #FF9500;
    --system-indigo: #5856D6;
    --system-teal: #5AC8FA;
    --glass-bg: rgba(255,255,255,0.45);
    --glass-bg-heavy: rgba(255,255,255,0.65);
    --glass-border: rgba(255,255,255,0.5);
    --glass-border-light: rgba(255,255,255,0.25);
    --glass-highlight: linear-gradient(135deg, rgba(255,255,255,0.6) 0%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0) 100%);
    --glass-shadow: 0 8px 32px rgba(0,0,0,0.08), 0 2px 8px rgba(0,0,0,0.04);
    --glass-shadow-lg: 0 16px 48px rgba(0,0,0,0.1), 0 4px 16px rgba(0,0,0,0.06);
    --glass-blur: 40px;
    --glass-saturate: 180%;
    --brand-gold: #B8963E;
    --brand-navy: #1B2A4A;
    --radius-sm: 14px;
    --radius-md: 20px;
    --radius-lg: 28px;
    --radius-pill: 100px;
    --spring: cubic-bezier(0.34, 1.56, 0.64, 1);
    --ease-out: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

  body {
    font-family: -apple-system, 'SF Pro Text', 'Inter', 'Helvetica Neue', sans-serif;
    background: var(--system-bg);
    color: var(--label-primary);
    line-height: 1.5;
    min-height: 100vh;
    min-height: 100dvh;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
  }

  .ambient-bg {
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    z-index: -1; overflow: hidden; background: #F2F2F7;
  }
  .ambient-bg::before {
    content: '';
    position: absolute;
    width: 140%; height: 140%; top: -20%; left: -20%;
    background:
      radial-gradient(ellipse at 20% 20%, rgba(90,200,250,0.18) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 20%, rgba(191,148,75,0.15) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 80%, rgba(88,86,214,0.12) 0%, transparent 50%),
      radial-gradient(ellipse at 20% 70%, rgba(52,199,89,0.1) 0%, transparent 40%),
      radial-gradient(ellipse at 85% 65%, rgba(255,149,0,0.1) 0%, transparent 40%);
    animation: ambientShift 20s ease-in-out infinite alternate;
  }
  @keyframes ambientShift {
    0% { transform: translate(0, 0) scale(1); }
    33% { transform: translate(-2%, 1%) scale(1.02); }
    66% { transform: translate(1%, -2%) scale(0.98); }
    100% { transform: translate(-1%, 2%) scale(1.01); }
  }

  /* ═══ NAV BAR ═══ */
  .nav-bar {
    position: fixed; top: 0; left: 0; right: 0; z-index: 100;
    height: 54px;
    display: flex; align-items: center; justify-content: center;
    padding: 0 16px;
    background: rgba(242,242,247,0.72);
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border-bottom: 0.5px solid var(--separator);
  }
  .nav-title {
    font-size: 17px; font-weight: 600;
    letter-spacing: -0.4px; color: var(--label-primary);
  }
  .nav-pill {
    position: absolute; right: 16px;
    display: flex; align-items: center; gap: 8px;
    background: rgba(255,255,255,0.45);
    backdrop-filter: blur(20px) saturate(160%);
    -webkit-backdrop-filter: blur(20px) saturate(160%);
    border: 0.5px solid var(--glass-border-light);
    border-radius: var(--radius-pill);
    padding: 6px 14px 6px 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  }
  .nav-pill-dot {
    width: 8px; height: 8px; border-radius: 50%;
    background: var(--system-green);
    box-shadow: 0 0 6px rgba(52,199,89,0.4);
  }
  .nav-pill-text { font-size: 13px; font-weight: 500; color: var(--label-secondary); }

  /* ═══ PROGRESS CAPSULE ═══ */
  .progress-capsule {
    position: fixed; top: 62px; left: 50%;
    transform: translateX(-50%); z-index: 99;
    display: none; align-items: center; gap: 10px;
    padding: 8px 18px;
    border-radius: var(--radius-pill);
    background: rgba(255,255,255,0.55);
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border: 0.5px solid rgba(255,255,255,0.5);
    box-shadow: 0 4px 16px rgba(0,0,0,0.06), 0 1px 4px rgba(0,0,0,0.04),
      inset 0 0.5px 0 rgba(255,255,255,0.6);
    animation: capsuleDrop 0.5s var(--spring);
  }
  @keyframes capsuleDrop {
    from { opacity: 0; transform: translateX(-50%) translateY(-12px) scale(0.9); }
    to { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
  }
  .progress-dots { display: flex; gap: 6px; }
  .progress-dot {
    width: 8px; height: 8px; border-radius: 50%;
    background: var(--fill-primary);
    transition: all 0.4s var(--spring);
  }
  .progress-dot.done {
    background: var(--system-green);
    box-shadow: 0 0 6px rgba(52,199,89,0.35);
    transform: scale(1.1);
  }
  .progress-dot.active {
    background: var(--system-blue);
    box-shadow: 0 0 8px rgba(0,122,255,0.35);
    width: 20px; border-radius: 4px;
  }
  .progress-dot.half {
    background: linear-gradient(90deg, var(--system-blue) 50%, var(--fill-primary) 50%);
    box-shadow: 0 0 4px rgba(0,122,255,0.2);
    width: 14px; border-radius: 4px;
  }
  .progress-step-label {
    font-size: 13px; font-weight: 500;
    color: var(--label-secondary); letter-spacing: -0.2px;
  }

  /* ═══ CONTAINER ═══ */
  .container {
    max-width: 680px; margin: 0 auto;
    padding: 70px 20px 40px;
    min-height: 100vh; min-height: 100dvh;
  }

  /* ═══ SCREENS ═══ */
  .screen { display: none; }
  .screen.active { display: block; animation: screenIn 0.55s var(--ease-out); }
  @keyframes screenIn {
    from { opacity: 0; transform: translateY(20px) scale(0.98); }
    to { opacity: 1; transform: translateY(0) scale(1); }
  }

  /* ═══ HERO ═══ */
  .hero { text-align: center; padding: 3.5rem 0 1.5rem; }
  .hero-icon {
    width: 80px; height: 80px; margin: 0 auto 1.5rem;
    border-radius: 22px;
    background: rgba(255,255,255,0.5);
    backdrop-filter: blur(30px) saturate(160%);
    -webkit-backdrop-filter: blur(30px) saturate(160%);
    border: 0.5px solid rgba(255,255,255,0.6);
    box-shadow: 0 8px 24px rgba(0,0,0,0.06),
      inset 0 1px 0 rgba(255,255,255,0.7), inset 0 -0.5px 0 rgba(0,0,0,0.04);
    display: flex; align-items: center; justify-content: center;
    font-size: 36px; position: relative; overflow: hidden;
  }
  .hero-icon::before {
    content: ''; position: absolute; inset: 0; border-radius: inherit;
    background: linear-gradient(135deg, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0) 50%);
  }
  .hero h1 {
    font-family: -apple-system, 'SF Pro Display', 'Inter', sans-serif;
    font-size: clamp(28px, 7vw, 38px);
    font-weight: 700; letter-spacing: -0.8px; line-height: 1.12;
    color: var(--label-primary); margin-bottom: 12px;
  }
  .hero h1 em {
    font-style: normal;
    background: linear-gradient(135deg, var(--brand-gold), #D4A84B);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  }
  .hero-sub {
    font-size: 17px; color: var(--label-secondary);
    max-width: 420px; margin: 0 auto 2rem;
    font-weight: 400; line-height: 1.55; letter-spacing: -0.2px;
  }
  .hero-pills {
    display: flex; justify-content: center; gap: 8px;
    margin-bottom: 2.5rem; flex-wrap: wrap;
  }
  .hero-pill {
    display: inline-flex; align-items: center; gap: 6px;
    padding: 8px 16px; border-radius: var(--radius-pill);
    background: rgba(255,255,255,0.45);
    backdrop-filter: blur(20px) saturate(160%);
    -webkit-backdrop-filter: blur(20px) saturate(160%);
    border: 0.5px solid rgba(255,255,255,0.4);
    box-shadow: 0 2px 8px rgba(0,0,0,0.04), inset 0 0.5px 0 rgba(255,255,255,0.5);
    font-size: 13px; font-weight: 500; color: var(--label-secondary);
  }
  .hero-pill .num { font-weight: 700; color: var(--system-blue); font-size: 14px; }

  /* ═══ BUTTONS ═══ */
  .btn-glass {
    display: inline-flex; align-items: center; gap: 8px;
    padding: 16px 32px; border-radius: var(--radius-pill); border: none;
    font-size: 17px; font-weight: 600; font-family: inherit; letter-spacing: -0.3px;
    cursor: pointer; position: relative; overflow: hidden;
    transition: all 0.3s var(--spring);
    background: var(--system-blue); color: white;
    box-shadow: 0 4px 16px rgba(0,122,255,0.3), 0 1px 3px rgba(0,0,0,0.1);
  }
  .btn-glass:hover { transform: scale(1.03); box-shadow: 0 6px 24px rgba(0,122,255,0.35); }
  .btn-glass:active { transform: scale(0.97); }
  .btn-glass .arrow { transition: transform 0.3s var(--spring); font-size: 18px; }
  .btn-glass:hover .arrow { transform: translateX(3px); }

  .btn-glass-sm {
    display: inline-flex; align-items: center; gap: 6px;
    padding: 12px 24px; border-radius: var(--radius-pill); border: none;
    font-size: 15px; font-weight: 600; font-family: inherit; letter-spacing: -0.2px;
    cursor: pointer; transition: all 0.3s var(--spring);
    background: var(--system-blue); color: white;
    box-shadow: 0 3px 12px rgba(0,122,255,0.25);
  }
  .btn-glass-sm:hover { transform: scale(1.03); }
  .btn-glass-sm:active { transform: scale(0.97); }

  /* ═══ QUOTE CARD ═══ */
  .glass-quote {
    border-radius: var(--radius-lg); padding: 28px 24px;
    margin: 2rem 0; text-align: center; position: relative; overflow: hidden;
    background: rgba(27,42,74,0.75);
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border: 0.5px solid rgba(255,255,255,0.12);
    box-shadow: 0 12px 40px rgba(27,42,74,0.2),
      inset 0 0.5px 0 rgba(255,255,255,0.15), inset 0 -0.5px 0 rgba(0,0,0,0.2);
  }
  .glass-quote::before {
    content: ''; position: absolute; inset: 0; border-radius: inherit;
    background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 40%);
    pointer-events: none;
  }
  .glass-quote .emoji { font-size: 28px; margin-bottom: 12px; position: relative; }
  .glass-quote blockquote {
    font-size: 16px; line-height: 1.6; color: rgba(255,255,255,0.85);
    font-style: italic; font-weight: 400; max-width: 460px; margin: 0 auto;
    position: relative; letter-spacing: -0.2px;
  }
  .glass-quote cite {
    display: block; color: var(--brand-gold); font-size: 12px; font-style: normal;
    font-weight: 600; margin-top: 12px; letter-spacing: 1.5px;
    text-transform: uppercase; position: relative;
  }

  /* ═══ SCENARIO CARD ═══ */
  .scenario-card {
    border-radius: var(--radius-lg); overflow: hidden; margin-bottom: 16px;
    background: rgba(255,255,255,0.5);
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border: 0.5px solid rgba(255,255,255,0.5);
    box-shadow: var(--glass-shadow-lg), inset 0 0.5px 0 rgba(255,255,255,0.6);
    position: relative;
  }
  .scenario-card::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 100px;
    background: linear-gradient(180deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 100%);
    pointer-events: none; border-radius: var(--radius-lg) var(--radius-lg) 0 0;
  }
  .scenario-header {
    padding: 24px 24px 0; display: flex; align-items: center; gap: 14px; position: relative;
  }
  .scenario-number {
    width: 40px; height: 40px; border-radius: 12px;
    background: rgba(0,122,255,0.12);
    backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
    border: 0.5px solid rgba(0,122,255,0.2);
    display: flex; align-items: center; justify-content: center;
    color: var(--system-blue); font-weight: 700; font-size: 16px; flex-shrink: 0;
  }
  .scenario-label {
    font-size: 12px; font-weight: 600; letter-spacing: 1.2px;
    text-transform: uppercase; color: var(--system-blue); margin-bottom: 2px;
  }
  .scenario-title {
    font-family: -apple-system, 'SF Pro Display', 'Inter', sans-serif;
    font-size: 22px; font-weight: 700; color: var(--label-primary); letter-spacing: -0.5px;
  }
  .scenario-body { padding: 20px 24px 24px; position: relative; }
  .scenario-context {
    font-size: 16px; color: var(--label-secondary); line-height: 1.65;
    margin-bottom: 20px; padding-bottom: 20px;
    border-bottom: 0.5px solid var(--separator); letter-spacing: -0.2px;
  }
  .scenario-prompt {
    font-weight: 600; color: var(--label-primary);
    font-size: 15px; margin-bottom: 14px; letter-spacing: -0.2px;
  }

  /* ═══ PHASE BADGE ═══ */
  .phase-badge {
    display: inline-flex; align-items: center; gap: 6px;
    padding: 5px 12px; border-radius: var(--radius-pill);
    font-size: 11px; font-weight: 700; letter-spacing: 0.8px;
    text-transform: uppercase; margin-bottom: 12px;
  }
  .phase-badge.phase-1 {
    background: rgba(0,122,255,0.1); color: var(--system-blue);
    border: 0.5px solid rgba(0,122,255,0.15);
  }
  .phase-badge.phase-2 {
    background: rgba(88,86,214,0.1); color: var(--system-indigo);
    border: 0.5px solid rgba(88,86,214,0.15);
  }
  .phase-badge .dot {
    width: 6px; height: 6px; border-radius: 50%;
  }
  .phase-badge.phase-1 .dot { background: var(--system-blue); }
  .phase-badge.phase-2 .dot { background: var(--system-indigo); }

  /* ═══ CHOICES ═══ */
  .choices { display: flex; flex-direction: column; gap: 10px; }
  .choice-btn {
    display: flex; align-items: flex-start; gap: 14px;
    border-radius: var(--radius-md); padding: 16px 18px;
    cursor: pointer; text-align: left; font-family: inherit; width: 100%;
    position: relative; overflow: hidden;
    background: rgba(255,255,255,0.4);
    backdrop-filter: blur(20px) saturate(160%);
    -webkit-backdrop-filter: blur(20px) saturate(160%);
    border: 0.5px solid rgba(255,255,255,0.4);
    box-shadow: 0 2px 8px rgba(0,0,0,0.04), inset 0 0.5px 0 rgba(255,255,255,0.5);
    transition: all 0.35s var(--spring);
  }
  .choice-btn::before {
    content: ''; position: absolute; inset: 0; border-radius: inherit;
    background: linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 50%);
    pointer-events: none; opacity: 0; transition: opacity 0.3s;
  }
  .choice-btn:hover {
    background: rgba(255,255,255,0.55); border-color: rgba(0,122,255,0.3);
    box-shadow: 0 4px 16px rgba(0,122,255,0.1), inset 0 0.5px 0 rgba(255,255,255,0.6);
    transform: translateY(-2px);
  }
  .choice-btn:hover::before { opacity: 1; }
  .choice-btn:active { transform: scale(0.98) translateY(0); }
  .choice-letter {
    width: 30px; height: 30px; border-radius: 10px;
    background: rgba(0,122,255,0.1); border: 0.5px solid rgba(0,122,255,0.15);
    display: flex; align-items: center; justify-content: center;
    color: var(--system-blue); font-weight: 700; font-size: 13px; flex-shrink: 0; margin-top: 1px;
  }
  .choice-text {
    font-size: 15px; color: var(--label-primary); line-height: 1.55; letter-spacing: -0.2px;
  }

  /* ═══ OUTCOMES ═══ */
  .outcome-panel { animation: screenIn 0.45s var(--ease-out); margin-top: 20px; }
  .outcome-box {
    border-radius: var(--radius-md); padding: 20px; margin-bottom: 10px;
    position: relative; overflow: hidden;
  }
  .outcome-box::before {
    content: ''; position: absolute; inset: 0; border-radius: inherit;
    background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 50%);
    pointer-events: none;
  }
  .outcome-box.eager {
    background: rgba(255,59,48,0.06);
    backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
    border: 0.5px solid rgba(255,59,48,0.12);
    box-shadow: inset 0 0.5px 0 rgba(255,255,255,0.3);
  }
  .outcome-box.reluctant {
    background: rgba(52,199,89,0.06);
    backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
    border: 0.5px solid rgba(52,199,89,0.12);
    box-shadow: inset 0 0.5px 0 rgba(255,255,255,0.3);
  }
  .outcome-box.compound {
    background: rgba(52,199,89,0.08);
    backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
    border: 0.5px solid rgba(52,199,89,0.18);
    box-shadow: inset 0 0.5px 0 rgba(255,255,255,0.3);
  }
  .outcome-box.recover {
    background: rgba(255,149,0,0.06);
    backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
    border: 0.5px solid rgba(255,149,0,0.15);
    box-shadow: inset 0 0.5px 0 rgba(255,255,255,0.3);
  }
  .outcome-box.jeopardize {
    background: rgba(255,59,48,0.08);
    backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
    border: 0.5px solid rgba(255,59,48,0.18);
    box-shadow: inset 0 0.5px 0 rgba(255,255,255,0.3);
  }
  .outcome-box.moderate {
    background: rgba(0,122,255,0.06);
    backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
    border: 0.5px solid rgba(0,122,255,0.12);
    box-shadow: inset 0 0.5px 0 rgba(255,255,255,0.3);
  }
  .outcome-box.stabilize {
    background: rgba(90,200,250,0.06);
    backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
    border: 0.5px solid rgba(90,200,250,0.15);
    box-shadow: inset 0 0.5px 0 rgba(255,255,255,0.3);
  }
  .outcome-box.maintain {
    background: rgba(0,122,255,0.06);
    backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
    border: 0.5px solid rgba(0,122,255,0.12);
    box-shadow: inset 0 0.5px 0 rgba(255,255,255,0.3);
  }

  .outcome-tag {
    font-size: 12px; font-weight: 600; letter-spacing: 0.5px; margin-bottom: 8px;
  }
  .outcome-box.eager .outcome-tag { color: var(--system-red); }
  .outcome-box.reluctant .outcome-tag { color: var(--system-green); }
  .outcome-box.compound .outcome-tag { color: #28A745; }
  .outcome-box.recover .outcome-tag { color: var(--system-orange); }
  .outcome-box.jeopardize .outcome-tag { color: #D32F2F; }
  .outcome-box.moderate .outcome-tag { color: var(--system-blue); }
  .outcome-box.stabilize .outcome-tag { color: var(--system-teal); }
  .outcome-box.maintain .outcome-tag { color: var(--system-blue); }
  .outcome-text {
    font-size: 15px; line-height: 1.6; color: var(--label-primary); letter-spacing: -0.2px;
  }
  .outcome-metrics { display: flex; gap: 8px; margin-top: 14px; flex-wrap: wrap; }
  .outcome-metric {
    padding: 6px 12px; border-radius: var(--radius-pill);
    font-size: 12px; font-weight: 600; letter-spacing: -0.1px;
    background: rgba(255,255,255,0.5);
    backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
    border: 0.5px solid rgba(255,255,255,0.4);
  }
  .outcome-box.eager .outcome-metric { color: var(--system-red); }
  .outcome-box.reluctant .outcome-metric { color: var(--system-green); }
  .outcome-box.compound .outcome-metric { color: #28A745; }
  .outcome-box.recover .outcome-metric { color: var(--system-orange); }
  .outcome-box.jeopardize .outcome-metric { color: #D32F2F; }
  .outcome-box.moderate .outcome-metric { color: var(--system-blue); }
  .outcome-box.stabilize .outcome-metric { color: var(--system-teal); }
  .outcome-box.maintain .outcome-metric { color: var(--system-blue); }

  .continue-row { display: flex; justify-content: flex-end; margin-top: 16px; }

  /* ═══ INSIGHT CAPSULE ═══ */
  .insight-capsule {
    border-radius: var(--radius-md); padding: 18px 20px;
    margin-top: 12px; display: flex; align-items: flex-start; gap: 12px;
    position: relative; overflow: hidden;
    background: rgba(27,42,74,0.8);
    backdrop-filter: blur(30px) saturate(180%);
    -webkit-backdrop-filter: blur(30px) saturate(180%);
    border: 0.5px solid rgba(255,255,255,0.1);
    box-shadow: 0 4px 16px rgba(27,42,74,0.15), inset 0 0.5px 0 rgba(255,255,255,0.12);
  }
  .insight-capsule::before {
    content: ''; position: absolute; inset: 0; border-radius: inherit;
    background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0) 40%);
    pointer-events: none;
  }
  .insight-icon { font-size: 20px; flex-shrink: 0; position: relative; }
  .insight-text {
    color: rgba(255,255,255,0.8); font-size: 14px; line-height: 1.6;
    font-weight: 400; position: relative; letter-spacing: -0.1px;
  }
  .insight-text strong { color: var(--brand-gold); font-weight: 600; }

  /* ═══ PHASE TRANSITION DIVIDER ═══ */
  .phase-divider {
    display: flex; align-items: center; gap: 12px;
    margin: 24px 0 20px; padding: 0 4px;
  }
  .phase-divider-line {
    flex: 1; height: 0.5px;
    background: linear-gradient(90deg, transparent, var(--separator), transparent);
  }
  .phase-divider-label {
    font-size: 11px; font-weight: 700; letter-spacing: 1.5px;
    text-transform: uppercase; color: var(--system-indigo);
    padding: 4px 12px; border-radius: var(--radius-pill);
    background: rgba(88,86,214,0.08);
    border: 0.5px solid rgba(88,86,214,0.12);
    white-space: nowrap;
  }

  /* ═══ RESULTS ═══ */
  .results-hero { text-align: center; padding: 2.5rem 0 1rem; }
  .results-hero h2 {
    font-family: -apple-system, 'SF Pro Display', 'Inter', sans-serif;
    font-size: 32px; font-weight: 700; color: var(--label-primary); letter-spacing: -0.8px;
  }
  .score-ring-container {
    width: 200px; height: 200px; margin: 20px auto;
    border-radius: 50%; padding: 12px;
    background: rgba(255,255,255,0.35);
    backdrop-filter: blur(30px) saturate(160%);
    -webkit-backdrop-filter: blur(30px) saturate(160%);
    border: 0.5px solid rgba(255,255,255,0.5);
    box-shadow: 0 8px 32px rgba(0,0,0,0.06),
      inset 0 1px 0 rgba(255,255,255,0.6), inset 0 -0.5px 0 rgba(0,0,0,0.04);
    position: relative;
  }
  .score-ring-container::before {
    content: ''; position: absolute; inset: 0; border-radius: 50%;
    background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0) 50%);
    pointer-events: none;
  }
  .score-ring { width: 100%; height: 100%; position: relative; }
  .score-ring svg { width: 100%; height: 100%; transform: rotate(-90deg); }
  .score-ring-bg { fill: none; stroke: var(--fill-tertiary); stroke-width: 6; }
  .score-ring-fill {
    fill: none; stroke: var(--system-blue); stroke-width: 6;
    stroke-linecap: round;
    transition: stroke-dashoffset 1.8s var(--ease-out);
    filter: drop-shadow(0 0 6px rgba(0,122,255,0.3));
  }
  .score-ring-text {
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%, -50%); text-align: center;
  }
  .score-ring-number {
    font-family: -apple-system, 'SF Pro Display', sans-serif;
    font-size: 44px; font-weight: 700; color: var(--label-primary);
    line-height: 1; letter-spacing: -1px;
  }
  .score-ring-label {
    font-size: 11px; color: var(--label-tertiary);
    text-transform: uppercase; letter-spacing: 1.5px;
    font-weight: 600; margin-top: 4px;
  }
  .archetype-card {
    border-radius: var(--radius-lg); padding: 28px 24px;
    text-align: center; margin: 20px 0;
    background: rgba(255,255,255,0.5);
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border: 0.5px solid rgba(255,255,255,0.5);
    box-shadow: var(--glass-shadow), inset 0 0.5px 0 rgba(255,255,255,0.6);
    position: relative;
  }
  .archetype-card::before {
    content: ''; position: absolute; inset: 0; border-radius: inherit;
    background: var(--glass-highlight); pointer-events: none; opacity: 0.3;
  }
  .archetype-name {
    font-family: -apple-system, 'SF Pro Display', sans-serif;
    font-size: 24px; font-weight: 700; color: var(--label-primary);
    letter-spacing: -0.5px; margin-bottom: 8px; position: relative;
  }
  .archetype-desc {
    color: var(--label-secondary); font-size: 15px; line-height: 1.6;
    max-width: 480px; margin: 0 auto; position: relative; letter-spacing: -0.2px;
  }
  .breakdown-card {
    border-radius: var(--radius-lg); overflow: hidden; margin: 16px 0;
    background: rgba(255,255,255,0.5);
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border: 0.5px solid rgba(255,255,255,0.5);
    box-shadow: var(--glass-shadow), inset 0 0.5px 0 rgba(255,255,255,0.6);
  }
  .breakdown-header {
    padding: 14px 20px; font-weight: 600; font-size: 13px;
    letter-spacing: 0.5px; color: var(--label-secondary); text-transform: uppercase;
  }
  .breakdown-row {
    display: flex; justify-content: space-between; align-items: center;
    padding: 14px 20px; border-top: 0.5px solid var(--separator);
  }
  .breakdown-label {
    font-size: 14px; color: var(--label-primary); font-weight: 500; letter-spacing: -0.2px;
  }
  .breakdown-sub { font-size: 12px; color: var(--label-tertiary); margin-top: 2px; }
  .breakdown-badges { display: flex; gap: 6px; flex-shrink: 0; }
  .breakdown-result {
    font-size: 12px; font-weight: 600; padding: 4px 10px;
    border-radius: var(--radius-pill);
    backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
  }
  .breakdown-result.reluctant {
    background: rgba(52,199,89,0.1); color: var(--system-green);
    border: 0.5px solid rgba(52,199,89,0.15);
  }
  .breakdown-result.eager {
    background: rgba(255,59,48,0.1); color: var(--system-red);
    border: 0.5px solid rgba(255,59,48,0.15);
  }
  .breakdown-result.compound {
    background: rgba(52,199,89,0.12); color: #28A745;
    border: 0.5px solid rgba(52,199,89,0.18);
  }
  .breakdown-result.recover {
    background: rgba(255,149,0,0.1); color: var(--system-orange);
    border: 0.5px solid rgba(255,149,0,0.15);
  }
  .breakdown-result.jeopardize {
    background: rgba(255,59,48,0.12); color: #D32F2F;
    border: 0.5px solid rgba(255,59,48,0.18);
  }
  .breakdown-result.moderate {
    background: rgba(0,122,255,0.1); color: var(--system-blue);
    border: 0.5px solid rgba(0,122,255,0.15);
  }
  .breakdown-result.stabilize {
    background: rgba(90,200,250,0.1); color: var(--system-teal);
    border: 0.5px solid rgba(90,200,250,0.15);
  }
  .breakdown-result.maintain {
    background: rgba(0,122,255,0.1); color: var(--system-blue);
    border: 0.5px solid rgba(0,122,255,0.15);
  }


  /* ═══ CTA ═══ */
  .cta-section {
    border-radius: var(--radius-lg); padding: 32px 24px;
    text-align: center; margin: 24px 0; position: relative; overflow: hidden;
    background: rgba(27,42,74,0.82);
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border: 0.5px solid rgba(255,255,255,0.1);
    box-shadow: 0 16px 48px rgba(27,42,74,0.2), inset 0 0.5px 0 rgba(255,255,255,0.12);
  }
  .cta-section::before {
    content: ''; position: absolute; inset: 0; border-radius: inherit;
    background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0) 40%);
    pointer-events: none;
  }
  .cta-section h3 {
    font-family: -apple-system, 'SF Pro Display', sans-serif;
    color: white; font-size: 22px; font-weight: 700;
    margin-bottom: 8px; position: relative; letter-spacing: -0.4px;
  }
  .cta-section p {
    color: rgba(255,255,255,0.65); font-size: 15px;
    margin-bottom: 20px; max-width: 400px; margin-left: auto; margin-right: auto;
    line-height: 1.55; position: relative; letter-spacing: -0.2px;
  }
  .cta-input-row { display: flex; gap: 10px; max-width: 420px; margin: 0 auto; position: relative; }
  .cta-input {
    flex: 1; padding: 14px 18px;
    border: 0.5px solid rgba(255,255,255,0.15);
    border-radius: var(--radius-pill);
    background: rgba(255,255,255,0.08);
    backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
    color: white; font-size: 15px; font-family: inherit; outline: none;
    transition: all 0.3s; letter-spacing: -0.1px;
  }
  .cta-input::placeholder { color: rgba(255,255,255,0.3); }
  .cta-input:focus { border-color: var(--brand-gold); background: rgba(255,255,255,0.12); box-shadow: 0 0 0 3px rgba(184,150,62,0.15); }
  .cta-submit {
    background: var(--brand-gold); color: white; border: none;
    padding: 14px 24px; border-radius: var(--radius-pill);
    font-weight: 700; font-size: 15px; cursor: pointer; font-family: inherit;
    transition: all 0.3s var(--spring); white-space: nowrap;
    box-shadow: 0 4px 12px rgba(184,150,62,0.3);
  }
  .cta-submit:hover { transform: scale(1.03); }
  .cta-submit:active { transform: scale(0.97); }
  .cta-success { color: var(--brand-gold); font-size: 14px; margin-top: 14px; display: none; font-weight: 500; position: relative; }

  .share-row { display: flex; justify-content: center; gap: 8px; margin: 20px 0; flex-wrap: wrap; }
  .share-btn {
    display: inline-flex; align-items: center; gap: 6px;
    padding: 10px 18px; border-radius: var(--radius-pill);
    font-size: 13px; font-weight: 600; cursor: pointer; font-family: inherit;
    transition: all 0.3s var(--spring);
    background: rgba(255,255,255,0.45);
    backdrop-filter: blur(20px) saturate(160%);
    -webkit-backdrop-filter: blur(20px) saturate(160%);
    border: 0.5px solid rgba(255,255,255,0.4); color: var(--label-secondary);
    box-shadow: 0 2px 8px rgba(0,0,0,0.04), inset 0 0.5px 0 rgba(255,255,255,0.5);
  }
  .share-btn:hover { background: rgba(255,255,255,0.6); color: var(--system-blue); transform: translateY(-1px); }
  .share-btn:active { transform: scale(0.96); }

  @media (max-width: 600px) {
    .container { padding: 64px 16px 32px; }
    .hero { padding: 2rem 0 1rem; }
    .scenario-header { padding: 20px 20px 0; }
    .scenario-body { padding: 16px 20px 20px; }
    .cta-input-row { flex-direction: column; }
    .outcome-metrics { flex-direction: column; }
    .breakdown-row { flex-direction: column; gap: 8px; align-items: flex-start; }
  }

  @keyframes glowPulse {
    0% { box-shadow: 0 0 0 0 rgba(0,122,255,0.3); }
    70% { box-shadow: 0 0 0 8px rgba(0,122,255,0); }
    100% { box-shadow: 0 0 0 0 rgba(0,122,255,0); }
  }
  .choice-selected { animation: glowPulse 0.6s var(--ease-out); }

  /* ═══ DECISION DNA ═══ */
  .dna-section { margin: 24px 0; }
  .dna-section-title {
    font-size: 13px; font-weight: 600; letter-spacing: 0.5px;
    color: var(--label-secondary); text-transform: uppercase;
    margin-bottom: 14px; padding-left: 4px;
  }
  .dna-strand-card {
    border-radius: var(--radius-lg); padding: 28px 24px; position: relative; overflow: hidden;
    background: rgba(255,255,255,0.5);
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border: 0.5px solid rgba(255,255,255,0.5);
    box-shadow: var(--glass-shadow), inset 0 0.5px 0 rgba(255,255,255,0.6);
  }
  .dna-strand-card::before {
    content: ''; position: absolute; inset: 0; border-radius: inherit;
    background: var(--glass-highlight); pointer-events: none; opacity: 0.2;
  }
  .dna-strand-row {
    display: flex; align-items: stretch; gap: 0; margin-bottom: 20px; position: relative;
  }
  .dna-strand-row:last-child { margin-bottom: 0; }
  .dna-scenario-label {
    width: 90px; flex-shrink: 0; display: flex; flex-direction: column;
    justify-content: center; padding-right: 12px; position: relative;
  }
  .dna-scenario-num {
    font-size: 11px; font-weight: 700; color: var(--label-tertiary);
    letter-spacing: 0.8px; text-transform: uppercase;
  }
  .dna-scenario-name {
    font-size: 13px; font-weight: 600; color: var(--label-primary);
    letter-spacing: -0.2px; line-height: 1.3;
  }
  .dna-phases { flex: 1; display: flex; gap: 6px; position: relative; }
  .dna-node {
    flex: 1; border-radius: 14px; padding: 12px 14px; min-height: 64px;
    display: flex; flex-direction: column; justify-content: center;
    position: relative; overflow: hidden;
    transition: all 0.4s var(--spring);
  }
  .dna-node::before {
    content: ''; position: absolute; inset: 0; border-radius: inherit;
    background: linear-gradient(135deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 50%);
    pointer-events: none;
  }
  .dna-node.reluctant {
    background: rgba(52,199,89,0.1); border: 0.5px solid rgba(52,199,89,0.2);
  }
  .dna-node.eager {
    background: rgba(255,59,48,0.08); border: 0.5px solid rgba(255,59,48,0.15);
  }
  .dna-node.compound {
    background: rgba(52,199,89,0.12); border: 0.5px solid rgba(52,199,89,0.25);
  }
  .dna-node.recover {
    background: rgba(255,149,0,0.1); border: 0.5px solid rgba(255,149,0,0.2);
  }
  .dna-node.jeopardize {
    background: rgba(255,59,48,0.1); border: 0.5px solid rgba(255,59,48,0.2);
  }
  .dna-node.moderate {
    background: rgba(0,122,255,0.1); border: 0.5px solid rgba(0,122,255,0.2);
  }
  .dna-node.stabilize {
    background: rgba(90,200,250,0.1); border: 0.5px solid rgba(90,200,250,0.2);
  }
  .dna-node.maintain {
    background: rgba(0,122,255,0.1); border: 0.5px solid rgba(0,122,255,0.2);
  }

  .dna-node-phase {
    font-size: 10px; font-weight: 700; letter-spacing: 0.6px;
    text-transform: uppercase; margin-bottom: 3px; opacity: 0.7;
  }
  .dna-node.reluctant .dna-node-phase, .dna-node.compound .dna-node-phase { color: var(--system-green); }
  .dna-node.eager .dna-node-phase, .dna-node.jeopardize .dna-node-phase { color: var(--system-red); }
  .dna-node.recover .dna-node-phase { color: var(--system-orange); }
  .dna-node.moderate .dna-node-phase { color: var(--system-blue); }
  .dna-node.stabilize .dna-node-phase { color: var(--system-teal); }
  .dna-node.maintain .dna-node-phase { color: var(--system-blue); }
  .dna-node-type {
    font-size: 14px; font-weight: 700; letter-spacing: -0.2px; position: relative;
  }
  .dna-node.reluctant .dna-node-type { color: #1B8A3E; }
  .dna-node.eager .dna-node-type { color: #CC2F26; }
  .dna-node.compound .dna-node-type { color: #1B8A3E; }
  .dna-node.recover .dna-node-type { color: #CC7A00; }
  .dna-node.jeopardize .dna-node-type { color: #CC2F26; }
  .dna-node.moderate .dna-node-type { color: #0066CC; }
  .dna-node.stabilize .dna-node-type { color: #4AA8C0; }
  .dna-node.maintain .dna-node-type { color: #0066CC; }
  .dna-connector {
    position: absolute; top: 50%; width: 6px; height: 6px; z-index: 2;
    left: calc(50% - 3px); transform: translateY(-50%);
  }
  .dna-connector::before {
    content: ''; position: absolute; inset: 0; border-radius: 50%;
    background: var(--label-tertiary); opacity: 0.3;
  }

  /* ═══ VULNERABILITY PATTERN ═══ */
  .vulnerability-card {
    border-radius: var(--radius-lg); padding: 24px; position: relative; overflow: hidden;
    background: rgba(255,59,48,0.04);
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border: 0.5px solid rgba(255,59,48,0.1);
    box-shadow: var(--glass-shadow), inset 0 0.5px 0 rgba(255,255,255,0.4);
    margin: 16px 0;
  }
  .vulnerability-card.strength {
    background: rgba(52,199,89,0.04);
    border-color: rgba(52,199,89,0.1);
  }
  .vulnerability-card::before {
    content: ''; position: absolute; inset: 0; border-radius: inherit;
    background: var(--glass-highlight); pointer-events: none; opacity: 0.15;
  }
  .vuln-header { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; position: relative; }
  .vuln-icon {
    width: 36px; height: 36px; border-radius: 10px;
    display: flex; align-items: center; justify-content: center; font-size: 18px;
    backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
  }
  .vulnerability-card .vuln-icon { background: rgba(255,59,48,0.1); border: 0.5px solid rgba(255,59,48,0.15); }
  .vulnerability-card.strength .vuln-icon { background: rgba(52,199,89,0.1); border: 0.5px solid rgba(52,199,89,0.15); }
  .vuln-title {
    font-size: 17px; font-weight: 700; letter-spacing: -0.3px; position: relative;
  }
  .vulnerability-card .vuln-title { color: #CC2F26; }
  .vulnerability-card.strength .vuln-title { color: #1B8A3E; }
  .vuln-body {
    font-size: 15px; line-height: 1.6; color: var(--label-secondary);
    letter-spacing: -0.2px; position: relative;
  }

  /* ═══ CHAPTER MAP ═══ */
  .chapter-map-card {
    border-radius: var(--radius-lg); overflow: hidden; position: relative;
    background: rgba(27,42,74,0.82);
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border: 0.5px solid rgba(255,255,255,0.1);
    box-shadow: 0 12px 40px rgba(27,42,74,0.15), inset 0 0.5px 0 rgba(255,255,255,0.12);
    margin: 16px 0;
  }
  .chapter-map-card::before {
    content: ''; position: absolute; inset: 0; border-radius: inherit;
    background: linear-gradient(135deg, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0) 40%);
    pointer-events: none;
  }
  .chapter-map-header {
    padding: 20px 24px 0; position: relative;
  }
  .chapter-map-title {
    color: white; font-size: 18px; font-weight: 700;
    letter-spacing: -0.3px; margin-bottom: 4px;
  }
  .chapter-map-sub {
    color: rgba(255,255,255,0.5); font-size: 13px; margin-bottom: 16px;
  }
  .chapter-row {
    display: flex; align-items: center; gap: 14px;
    padding: 14px 24px; border-top: 0.5px solid rgba(255,255,255,0.06);
    position: relative; transition: background 0.3s;
  }
  .chapter-row:hover { background: rgba(255,255,255,0.03); }
  .chapter-priority {
    width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0;
  }
  .chapter-priority.high { background: var(--system-red); box-shadow: 0 0 6px rgba(255,59,48,0.4); }
  .chapter-priority.medium { background: var(--system-orange); box-shadow: 0 0 6px rgba(255,149,0,0.3); }
  .chapter-priority.low { background: var(--system-green); box-shadow: 0 0 6px rgba(52,199,89,0.3); }
  .chapter-info { flex: 1; }
  .chapter-name { color: rgba(255,255,255,0.9); font-size: 15px; font-weight: 600; letter-spacing: -0.2px; }
  .chapter-reason { color: rgba(255,255,255,0.45); font-size: 12px; margin-top: 2px; }
  .chapter-tag {
    font-size: 11px; font-weight: 600; padding: 4px 10px;
    border-radius: var(--radius-pill); letter-spacing: 0.3px;
  }
  .chapter-tag.start-here {
    background: rgba(255,59,48,0.15); color: rgba(255,120,113,1);
    border: 0.5px solid rgba(255,59,48,0.2);
  }
  .chapter-tag.review {
    background: rgba(255,149,0,0.12); color: rgba(255,179,64,1);
    border: 0.5px solid rgba(255,149,0,0.15);
  }
  .chapter-tag.strong {
    background: rgba(52,199,89,0.12); color: rgba(80,220,120,1);
    border: 0.5px solid rgba(52,199,89,0.15);
  }

  /* ═══ PROFILE CARD ═══ */
  .profile-card-container { margin: 24px 0; }
  .profile-card {
    border-radius: var(--radius-lg); padding: 32px 28px; position: relative; overflow: hidden;
    background: linear-gradient(145deg, rgba(27,42,74,0.92), rgba(27,42,74,0.78));
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border: 0.5px solid rgba(255,255,255,0.12);
    box-shadow: 0 20px 60px rgba(27,42,74,0.25), inset 0 0.5px 0 rgba(255,255,255,0.15);
  }
  .profile-card::before {
    content: ''; position: absolute; inset: 0; border-radius: inherit;
    background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0) 35%);
    pointer-events: none;
  }
  .profile-card-badge {
    display: inline-flex; align-items: center; gap: 6px;
    padding: 5px 12px; border-radius: var(--radius-pill);
    background: rgba(184,150,62,0.15); border: 0.5px solid rgba(184,150,62,0.25);
    font-size: 10px; font-weight: 700; letter-spacing: 1.2px;
    text-transform: uppercase; color: var(--brand-gold); margin-bottom: 16px; position: relative;
  }
  .profile-card-archetype {
    font-family: -apple-system, 'SF Pro Display', sans-serif;
    font-size: 28px; font-weight: 700; color: white;
    letter-spacing: -0.6px; margin-bottom: 6px; position: relative;
  }
  .profile-card-score {
    font-size: 15px; color: rgba(255,255,255,0.5); margin-bottom: 20px; position: relative;
  }
  .profile-card-dna {
    display: flex; gap: 4px; margin-bottom: 20px; position: relative;
  }
  .profile-dna-pip {
    flex: 1; height: 28px; border-radius: 6px;
    display: flex; align-items: center; justify-content: center;
    font-size: 9px; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase;
  }
  .profile-dna-pip.reluctant { background: rgba(52,199,89,0.2); color: rgba(80,220,120,0.9); }
  .profile-dna-pip.eager { background: rgba(255,59,48,0.15); color: rgba(255,120,113,0.9); }
  .profile-dna-pip.compound { background: rgba(52,199,89,0.25); color: rgba(80,220,120,0.9); }
  .profile-dna-pip.recover { background: rgba(255,149,0,0.15); color: rgba(255,179,64,0.9); }
  .profile-dna-pip.jeopardize { background: rgba(255,59,48,0.18); color: rgba(255,120,113,0.9); }
  .profile-dna-pip.moderate { background: rgba(0,122,255,0.2); color: rgba(100,180,255,0.9); }
  .profile-dna-pip.stabilize { background: rgba(90,200,250,0.2); color: rgba(130,215,255,0.9); }
  .profile-dna-pip.maintain { background: rgba(0,122,255,0.2); color: rgba(100,180,255,0.9); }

  .profile-card-insight {
    font-size: 14px; line-height: 1.6; color: rgba(255,255,255,0.6);
    padding-top: 16px; border-top: 0.5px solid rgba(255,255,255,0.08);
    position: relative; letter-spacing: -0.1px;
  }
  .profile-card-insight strong { color: var(--brand-gold); }
  .profile-card-footer {
    display: flex; justify-content: space-between; align-items: center;
    margin-top: 20px; padding-top: 16px;
    border-top: 0.5px solid rgba(255,255,255,0.08); position: relative;
  }
  .profile-card-brand {
    font-size: 12px; font-weight: 600; color: rgba(255,255,255,0.3);
    letter-spacing: 0.5px;
  }
  .profile-card-date {
    font-size: 11px; color: rgba(255,255,255,0.25); letter-spacing: 0.3px;
  }
  .profile-card-actions {
    display: flex; gap: 8px; justify-content: center; margin-top: 14px;
  }
  .profile-action-btn {
    display: inline-flex; align-items: center; gap: 6px;
    padding: 10px 18px; border-radius: var(--radius-pill);
    font-size: 13px; font-weight: 600; cursor: pointer; font-family: inherit;
    transition: all 0.3s var(--spring); border: none;
    background: rgba(184,150,62,0.15); color: var(--brand-gold);
    border: 0.5px solid rgba(184,150,62,0.25);
    box-shadow: 0 2px 8px rgba(184,150,62,0.1);
  }
  .profile-action-btn:hover { background: rgba(184,150,62,0.25); transform: translateY(-1px); }
  .profile-action-btn:active { transform: scale(0.96); }

  @media (max-width: 600px) {
    .dna-scenario-label { width: 70px; }
    .dna-node { padding: 10px; min-height: 56px; }
    .dna-node-type { font-size: 12px; }
    .profile-card { padding: 24px 20px; }
    .profile-card-archetype { font-size: 22px; }
    .profile-card-actions { flex-direction: column; }
    .profile-dna-pip { font-size: 8px; height: 24px; }
  }

  @keyframes dnaNodeIn {
    from { opacity: 0; transform: scale(0.8); }
    to { opacity: 1; transform: scale(1); }
  }
  .dna-node-animate { animation: dnaNodeIn 0.4s var(--spring) both; }
</style>
</head>
<body>
<div class="ambient-bg"></div>

<div class="nav-bar">
  <div class="nav-title">The Reluctant Seller</div>
  <div class="nav-pill" id="nav-pill" style="display:none;">
    <div class="nav-pill-dot"></div>
    <div class="nav-pill-text" id="nav-status">In Progress</div>
  </div>
</div>

<div class="progress-capsule" id="progress-capsule">
  <div class="progress-dots" id="progress-dots"></div>
  <div class="progress-step-label" id="progress-step-label"></div>
</div>

<div class="container">
  <div class="screen active" id="screen-landing">
    <div class="hero">
      <div class="hero-icon">&#127819;</div>
      <h1>Are You Selling<br>or <em>Letting People Buy?</em></h1>
      <p class="hero-sub">
        Five real-world scenarios. Three choices each — your opening move and the follow-through
        that compounds, recovers, or destroys your progress.
      </p>
      <div class="hero-pills">
        <div class="hero-pill"><span class="num">5</span> Scenarios</div>
        <div class="hero-pill"><span class="num">2</span> Phases Each</div>
        <div class="hero-pill"><span class="num">3</span> Paths Each</div>
      </div>
      <button class="btn-glass" onclick="startSimulator()">
        Begin <span class="arrow">&rarr;</span>
      </button>
    </div>
    <div class="glass-quote">
      <div class="emoji">&#127819;</div>
      <blockquote>
        "The other kids were selling lemonade. I was letting people buy it.
        There is a canyon of difference between those two things."
      </blockquote>
      <cite>The Reluctant Seller</cite>
    </div>
  </div>

  <div class="screen" id="screen-scenario"></div>
  <div class="screen" id="screen-results"></div>
</div>

<script>
// ═══════════════════════════════════════════
//  SCENARIO DATA — TWO PHASES PER SCENARIO
// ═══════════════════════════════════════════

const scenarios = [
{
  number: 1, label: "DISCOVERY", title: "The First Call",
  p1_context: "You're on a discovery call with the VP of Operations at a mid-market company. They just described a pain point your product solves perfectly. You can feel the excitement. They pause: <strong>\"So, can you help us with that?\"</strong>",
  p1_prompt: "What do you say next?",
  p1_choices: [
    { letter: "A", text: "\"Absolutely — that's exactly what we do. Let me walk you through how our platform handles that. We've helped dozens of companies just like yours...\"", type: "eager" },
    { letter: "B", text: "\"Yes, I think we can. Let me ask a couple of quick questions to make sure we're aligned, and then I'll walk you through the approach that's worked best for similar situations.\"", type: "moderate" },
    { letter: "C", text: "\"Maybe. Before I answer that — how long has this been a problem? And what have you already tried? I want to make sure I'm not wasting your time if we're not the right fit.\"", type: "reluctant" }
  ],
  p1_outcomes: {
    eager: { text: "You launched into a pitch. The VP listened politely, said \"interesting,\" and ended with \"let me think about it.\" You never heard back. You positioned yourself as a vendor, not an expert.", metrics: ["Closed: Never", "Follow-ups: 4", "Leverage: None"] },
    moderate: { text: "A reasonable approach — you asked a few questions before pitching. The VP engaged with your questions but noticed you pivoted to a solution quickly. They booked a second call but framed it as 'evaluating options,' putting you in a competitive bake-off you could have avoided.", metrics: ["Second call: Booked", "Position: One of several", "Leverage: Moderate"] },
    reluctant: { text: "The VP spent twelve minutes unpacking the problem. By the time they finished, they had convinced themselves how urgent it was. You said: \"Let me think about the best approach.\" They emailed you the next morning.", metrics: ["Second call: Inbound", "Cycle: 28 days", "Leverage: High"] }
  },
  p1_insight: "The eager seller answers the question. The moderate seller asks questions to set up a pitch. The reluctant seller <strong>deepens the question itself</strong>. When you let the buyer articulate their own pain, they sell themselves.",

  p2_from_eager: {
    context: "It's been a week of silence. You've sent two follow-up emails — no response. Your manager asks about the deal. You check LinkedIn and see the VP just connected with your competitor's account executive.",
    prompt: "How do you handle the recovery?",
    choices: [
      { letter: "A", text: "Send a short note: \"I've been thinking about what you described, and I realized I may have jumped ahead last time. If it's still relevant, I'd like to hear more about [specific detail they mentioned]. If not, no worries — I genuinely hope you solve it.\"", type: "recover" },
      { letter: "B", text: "Send a third follow-up: \"Just checking in! I know you're busy but I'd love to find 15 minutes to continue our conversation. I can also send over a case study that might be relevant.\"", type: "jeopardize" },
      { letter: "C", text: "Wait another week without emailing. Then send a brief article or industry insight related to their problem with a one-line note: \"Thought of your team when I read this.\" No ask, no pitch.", type: "stabilize" }
    ],
    outcomes: {
      recover: { text: "Your email stood out because it did something no follow-up ever does — it admitted you moved too fast. The VP replied within two hours: \"Actually yes, we're still figuring this out.\" You got a second discovery call. Not a pitch meeting — a real conversation.", metrics: ["Status: Recovered", "Dynamic: Rebalanced", "Lesson cost: 1 week"] },
      jeopardize: { text: "The third follow-up confirmed what the VP already suspected: you need this deal more than they do. The case study felt transactional. You joined the pile of vendors in their inbox. The competitor, who asked better questions, got the next meeting.", metrics: ["Status: Dead", "Emails sent: 5", "Perception: Desperate"] },
      stabilize: { text: "The article was a nice touch — the VP clicked it and replied \"thanks, good read.\" But the conversation didn't advance. You're on their radar as a thoughtful person, but not as someone solving their problem. The deal is alive but directionless.", metrics: ["Status: Stalled", "Goodwill: Built", "Momentum: None"] }
    },
    insight: "A bad opening is rarely fatal. The desperate follow-up kills the deal. The passive wait preserves dignity but wastes time. <strong>The real recovery requires vulnerability — admitting you moved too fast.</strong>"
  },
  p2_from_reluctant: {
    context: "The VP emailed you the next morning asking to talk again. But in the second call, their CFO joins unexpectedly. The CFO is skeptical and immediately asks: \"Our team says they need this, but I've seen tools like this before. What makes yours worth the price?\"",
    prompt: "The CFO just challenged you directly. How do you respond?",
    choices: [
      { letter: "A", text: "Turn to the VP and say: \"You've been living with this problem — would you share what's at stake if it doesn't get solved?\" Let the VP make your case for you.", type: "maintain" },
      { letter: "B", text: "Launch into your competitive differentiators and ROI data. Show the CFO the numbers — payback period, efficiency gains, customer case studies. Make the financial case airtight.", type: "jeopardize" },
      { letter: "C", text: "\"That's a fair question, and honestly, I'm not sure we are worth it for your situation yet. Can I ask what previous tools fell short? I want to understand what 'worth the price' means to you specifically before I answer.\"", type: "compound" }
    ],
    outcomes: {
      maintain: { text: "The VP shared a compelling answer, and the CFO listened. But by deflecting the CFO's direct question, you signaled that you couldn't hold your own in the room. The CFO approved a pilot — not the full deal — wanting to 'test before committing.' You held ground but didn't advance it.", metrics: ["Outcome: Pilot only", "CFO trust: Partial", "Dynamic: Cautious"] },
      jeopardize: { text: "Your ROI pitch was polished. Too polished. The CFO had heard it all before from the last three vendors. By going into sell mode, you broke the dynamic that got you the second call. The deal stalled in committee for six weeks and eventually died of neglect.", metrics: ["Stalled: 6 weeks", "Lost to: Inaction", "Dynamic: Broken"] },
      compound: { text: "The CFO paused. Nobody ever questioned whether they should buy in the buyer's own meeting. They spent ten minutes explaining their bad experiences — revealing exactly what they needed to hear to say yes. The CFO approved the deal the following week without a committee review.", metrics: ["CFO approval: Direct", "No committee: Bypassed", "Close: 2 weeks"] }
    },
    insight: "Deflecting to your champion is safe but small. Pitching the CFO directly breaks the spell. <strong>The reluctant seller treats the CFO's skepticism as a gift — another chance to let the buyer reveal what they actually need.</strong>"
  }
},

{
  number: 2, label: "OUTREACH", title: "The Cold Email",
  p1_context: "You've identified a dream account — a fast-growing company that fits your ICP. Their CEO just posted about a challenge your product addresses. Time to write the first email.",
  p1_prompt: "Which email do you send?",
  p1_choices: [
    { letter: "A", text: "\"Hi [Name], saw your post about [challenge]. We ran into something eerily similar last year — the fix ended up being counterintuitive. Happy to share what we learned if you're curious. Either way, what you're building is impressive.\"", type: "reluctant" },
    { letter: "B", text: "\"Hi [Name], I'm [You] from [Company]. We're the leading platform for [solution]. I'd love to schedule 15 minutes to show you how we've helped companies like yours. Free Thursday?\"", type: "eager" },
    { letter: "C", text: "\"Hi [Name], saw your post about [challenge] — we work in this space and have a perspective that might be useful. Would you be open to a quick conversation? No pitch, just want to compare notes and see if there's a mutual fit.\"", type: "moderate" }
  ],
  p1_outcomes: {
    reluctant: { text: "The CEO read it twice. No pitch, no ask. They replied: \"Actually yes, I'd love to hear what you learned. What was the counterintuitive part?\" The power dynamic inverted from email one.", metrics: ["Reply rate: ~35%", "Tone: Curious", "Perception: Peer"] },
    eager: { text: "Your email landed alongside fifteen identical ones. \"Leading platform.\" \"Schedule 15 minutes.\" Archived without being read past line two. Three follow-ups. Silence.", metrics: ["Open rate: ~40%", "Reply: 0%", "Perception: Spam"] },
    moderate: { text: "The CEO replied: \"Sure, happy to chat. Let's find a time.\" Polite, but transactional. You got the meeting, but you entered it as a vendor requesting time, not a peer offering insight. The power dynamic is neutral at best.", metrics: ["Reply rate: ~18%", "Tone: Polite", "Perception: Vendor"] }
  },
  p1_insight: "The eager email is about the sender. The moderate email is polite but still an ask. The reluctant email is entirely about the recipient. <strong>Your outreach should feel like a gift, not an invoice.</strong>",

  p2_from_eager: {
    context: "Three follow-ups, zero replies. You're about to archive this prospect. Then you notice the CEO just posted again — this time about a hiring challenge related to the same problem.",
    prompt: "Do you re-engage?",
    choices: [
      { letter: "A", text: "Send another product-focused email: \"Hi again! I noticed you're scaling the team. Our platform actually reduces headcount needs by automating [function]. Would love to show you.\"", type: "jeopardize" },
      { letter: "B", text: "Comment publicly on their post with a thoughtful observation about the hiring challenge. No mention of your company. Then wait.", type: "recover" },
      { letter: "C", text: "Have a mutual connection introduce you casually. Ask the connection to mention you as 'someone working on interesting stuff in this space' without making it feel like a referral sell.", type: "stabilize" }
    ],
    outcomes: {
      jeopardize: { text: "The CEO saw your name in their inbox for the fifth time. This time they didn't just ignore it — they mentally blacklisted you. When your company's name came up in a board discussion six months later, they said: \"Oh, those guys? They spammed me for weeks.\"", metrics: ["Blacklisted: Yes", "Brand damage: Permanent", "Future access: Zero"] },
      recover: { text: "Your LinkedIn comment got 12 likes and a reply from the CEO. A week later, they DM'd you: \"Hey, what does your company actually do?\" They asked YOU. The deal closed four months later.", metrics: ["Recovery time: 5 weeks", "Inbound inquiry: Yes", "Close: 4 months"] },
      stabilize: { text: "The warm intro worked — the CEO took the meeting as a favor to the connection. But the dynamic felt slightly forced. The CEO was polite but guarded, treating it as a networking call rather than a genuine exploration. You got access but not trust.", metrics: ["Meeting: Yes", "Dynamic: Obligatory", "Trust: Low"] }
    },
    insight: "When outreach fails, most sellers try harder or try sideways. <strong>The reluctant seller changes the channel entirely.</strong> Stop emailing. Start being useful where they already are."
  },
  p2_from_reluctant: {
    context: "The CEO replied and you had a great exchange. They said: \"This is interesting. Let me loop in my Head of Ops — can you send something we can look at together?\" They want materials.",
    prompt: "What do you send?",
    choices: [
      { letter: "A", text: "Send your full sales deck, a case study PDF, pricing overview, and a Calendly link: \"Here's everything you need! Happy to jump on a call whenever works.\"", type: "jeopardize" },
      { letter: "B", text: "Send a brief two-paragraph email summarizing the insight you discussed, one specific question about their situation, and: \"Happy to walk through the details live if it's worth a deeper conversation — but this should give you enough to decide if it is.\"", type: "compound" },
      { letter: "C", text: "Send a one-page overview doc with your key differentiators and a few customer logos. Keep it concise: \"Here's a quick overview. Happy to dive deeper on anything that's relevant to your situation.\"", type: "maintain" }
    ],
    outcomes: {
      jeopardize: { text: "The CEO opened the email and saw four attachments and a Calendly link. The magic of your original email — the casual, peer-to-peer curiosity — evaporated instantly. The Head of Ops glanced at the pricing page, decided it was too expensive without context, and the CEO never responded.", metrics: ["Dynamic: Destroyed", "Reply: None", "Lost to: Overwhelm"] },
      compound: { text: "The CEO forwarded your email to the Head of Ops with the note: \"Worth a look — this person actually understands the problem.\" Your question prompted the Ops lead to reply directly with specifics. You now had two champions and a meeting request they initiated.", metrics: ["Champions: 2", "Context: Deep", "Meeting: Inbound"] },
      maintain: { text: "The overview was clean and professional. The Head of Ops reviewed it and said it looked interesting. They scheduled a demo call — but it was a standard evaluation, with you presenting to a panel. You maintained momentum but lost the peer-to-peer intimacy of your original exchange.", metrics: ["Demo: Scheduled", "Dynamic: Standard eval", "Intimacy: Lost"] }
    },
    insight: "The hardest moment for a reluctant seller is when things are going well. Dumping materials kills the magic. A polished one-pager is better but still shifts you to vendor mode. <strong>The best follow-up to a great first email is a great second email — not a deck.</strong>"
  }
},

{
  number: 3, label: "NEGOTIATION", title: "The Price Push",
  p1_context: "You're deep into a deal. The buyer loves the product. Then in the final call, procurement says: <strong>\"We really want to move forward, but your price is about 20% above our budget. Can you sharpen your pencil?\"</strong>",
  p1_prompt: "How do you respond?",
  p1_choices: [
    { letter: "A", text: "\"I appreciate you being direct. Before we discuss price, help me understand — is the 20% gap a hard ceiling, or is there flexibility if we can demonstrate the ROI clearly? I want to find the right solution, not just the cheapest one.\"", type: "moderate" },
    { letter: "B", text: "\"I appreciate you being direct. The price reflects the scope we discussed. I can restructure the engagement to fit your budget — here's what that would look like.\"", type: "reluctant" },
    { letter: "C", text: "\"I understand budget constraints. Let me see what I can do — I think we can probably get closer to your number. I'll send a revised proposal this afternoon.\"", type: "eager" }
  ],
  p1_outcomes: {
    moderate: { text: "A reasonable question, but it signaled that you're open to moving on price — you just want justification first. Procurement sensed the opening and came back with a detailed ROI analysis showing why 10% off was 'fair.' You negotiated to 10% off, feeling like you won. You didn't — they anchored you.", metrics: ["Discount: 10%", "Dynamic: Their frame", "Perception: Flexible"] },
    reluctant: { text: "You held price and offered reduced scope. They talked internally, came back with full budget approval for the original scope. They had the money — procurement was testing you. You passed.", metrics: ["Discount: 0%", "Full scope: Yes", "Trust: Established"] },
    eager: { text: "You offered 15% off. They asked for another 8%. You settled at 20% — exactly where they wanted you. You also trained this buyer that your prices are negotiable. Margin: barely worth the effort.", metrics: ["Discount: 20%", "Margin: Severe hit", "Renewal risk: High"] }
  },
  p1_insight: "Procurement's job is to ask for a discount. Asking about the gap sounds smart but opens the door. Offering to restructure scope holds your ground completely. <strong>Never negotiate against yourself.</strong>",

  p2_from_eager: {
    context: "The deal closed at 20% off. Three months in, the customer is happy. Renewal time. Procurement sends: \"We'd like to discuss pricing for the renewal. Given the current market, we expect at least the same terms, and ideally an additional loyalty discount.\"",
    prompt: "They want an even deeper discount at renewal. What do you do?",
    choices: [
      { letter: "A", text: "Offer a 5% loyalty discount on top of the existing 20% to keep the account. Losing this customer would be worse than the margin hit.", type: "jeopardize" },
      { letter: "B", text: "Respond: \"We're glad the product is delivering value. Our standard renewal is at full price, which reflects the scope and results. I'm happy to discuss what a right-sized engagement looks like at any budget.\"", type: "recover" },
      { letter: "C", text: "Respond: \"We'd love to continue the partnership. We can hold the current 20% discount for the renewal term, but I'm not able to go further. If budget is genuinely constrained, let's talk about which features matter most.\"", type: "stabilize" }
    ],
    outcomes: {
      jeopardize: { text: "You're now at 25% off list price, and you've established that every renewal comes with a new concession. Your finance team is flagging this account as unprofitable. The customer doesn't respect you more for the discount — they respect you less.", metrics: ["Total discount: 25%", "Payback: 18 months", "Respect: Declining"] },
      recover: { text: "Procurement pushed back. You held firm. They escalated to the VP who told procurement: \"The product is working — pay the renewal.\" You're still at 20% off, but you drew a line. Next year, you'll have leverage to return to standard pricing.", metrics: ["Held at: 20% off", "Bleeding: Stopped", "Next year: Recoverable"] },
      stabilize: { text: "Holding the current discount was reasonable and the customer accepted without friction. But you missed an opportunity to reset pricing expectations. The 20% discount is now permanently baked in, and next renewal they'll ask again. You stopped the bleeding but didn't close the wound.", metrics: ["Held at: 20% off", "Friction: None", "Precedent: Unchanged"] }
    },
    insight: "The first discount is the most expensive because it sets the pattern. Adding more is catastrophic. Holding the line is good. <strong>The real recovery is resetting expectations entirely — even if it means a harder conversation now.</strong>"
  },
  p2_from_reluctant: {
    context: "Procurement approved full price. The deal is about to close. Then the champion — the VP who loves you — calls: \"Listen, I went to bat for you on this. I'd really appreciate it if you could throw in the premium support tier for free. Just as a gesture of goodwill.\"",
    prompt: "Your champion just asked for a freebie. How do you respond?",
    choices: [
      { letter: "A", text: "\"Absolutely — you earned it. I'll add premium support at no charge. Consider it our way of saying thank you for championing this internally.\"", type: "jeopardize" },
      { letter: "B", text: "\"I really do appreciate what you did. Let me see if I can include premium support for the first 90 days as an onboarding bonus. After that, it would move to the standard tier unless we expand the contract.\"", type: "maintain" },
      { letter: "C", text: "\"I really do appreciate what you did, and I don't take that lightly. Premium support is something I can include if we extend the contract to two years. That gives me something to work with on my end.\"", type: "compound" }
    ],
    outcomes: {
      jeopardize: { text: "You gave away premium support — a $15K annual line item — for free. When renewal came, premium support was now an expectation. When you tried to charge for it, the VP said: \"But you gave it to us for free last time.\" You accidentally converted a revenue line into a freebie.", metrics: ["Revenue lost: $15K/yr", "Precedent set: Bad", "Champion dynamic: Entitled"] },
      maintain: { text: "The 90-day trial was a reasonable compromise. The VP felt acknowledged, and you didn't give away the farm. But after 90 days, downgrading their support tier created friction and felt like a bait-and-switch. The VP's goodwill partially eroded. You held value but created a future headache.", metrics: ["Short-term: Good", "Day 91: Friction", "Net: Neutral"] },
      compound: { text: "The VP paused, then laughed: \"Fair enough.\" They came back with a two-year approval. You now have a two-year contract at full price with premium support — 2.3x the original annual value. The VP respected the counter because it was professional, not personal.", metrics: ["Contract: 2 years", "Value: 2.3x original", "Champion respect: Higher"] }
    },
    insight: "Giving the freebie erodes value. The trial creates a time bomb. <strong>The reluctant seller never gives — they trade.</strong> Every concession has a counter-concession. That's not stingy. That's professional."
  }
},

{
  number: 4, label: "LEADERSHIP", title: "The Quarter-End Panic",
  p1_context: "Last week of the quarter. Your team is at 82% of quota. Three deals are in late stage but unsigned. Your VP of Sales says: <strong>\"If we offer 30-day terms and a 10% discount on all three, I think we can pull them in by Friday.\"</strong>",
  p1_prompt: "What do you decide?",
  p1_choices: [
    { letter: "A", text: "\"Do it. We need these deals. Offer the terms, get the signatures, and we'll make up the margin next quarter.\"", type: "eager" },
    { letter: "B", text: "\"No. I'd rather report 82% with clean deals than 100% with discounted ones. If they're real, they'll close in the first two weeks of next quarter at full price.\"", type: "reluctant" },
    { letter: "C", text: "\"Let's be selective. Offer the terms on the one deal where the champion is pushing hard for Q4 implementation. Hold the other two at full price — if they're real, they'll close soon either way.\"", type: "moderate" }
  ],
  p1_outcomes: {
    eager: { text: "Two of three closed. You hit 94%. But your board noticed the discounts. Your CFO flagged margin erosion. Your team learned that quarter-end panic unlocks discounts. Culture damage: real.", metrics: ["Quota: 94%", "Margin: Eroding", "Culture: Damaged"] },
    reluctant: { text: "You reported 82% honestly. Two deals closed in the first ten days of next quarter at full price. The third walked — a bad-fit customer who would have churned. Board respected the discipline. Team respected it more.", metrics: ["Quota: 82% (honest)", "Next Q start: Strong", "Morale: Elevated"] },
    moderate: { text: "You hit 88%. The one discounted deal closed Friday; the other two slipped into next quarter as planned. A reasonable outcome, but your team now knows there's a threshold where you'll bend. The message was: \"We have principles, but they're flexible under pressure.\" That's a hard culture to maintain.", metrics: ["Quota: 88%", "Message: Mixed", "Culture: Ambiguous"] }
  },
  p1_insight: "The selective approach feels smart — it's the most common CEO move. But it tells your team that principles are situational. <strong>The CEO's relationship with the quarter-end number is the single biggest determinant of sales culture.</strong>",

  p2_from_eager: {
    context: "Next quarter begins. Your VP of Sales comes to you on day one: \"Three deals in pipeline are expecting the same discount terms. Word got out. Also, your best AE just told me she's interviewing at a competitor because she's 'tired of selling a product we don't believe in enough to hold price on.'\"",
    prompt: "Your pricing culture is collapsing and your best rep is about to leave. What do you do?",
    choices: [
      { letter: "A", text: "Match whatever the competitor is offering your AE. Then quietly extend the same terms to the three pipeline deals. Fix the culture later when things stabilize.", type: "jeopardize" },
      { letter: "B", text: "Meet the AE one-on-one first. Listen to her concerns. Then tell the VP: \"Hold all three deals at standard pricing. I'll address the team tomorrow.\" Buy yourself a day to think clearly before making any public moves.", type: "stabilize" },
      { letter: "C", text: "Call an all-hands with the sales team. Say: \"Last quarter I made a mistake. We're returning to standard pricing effective immediately. I'd rather have a smaller team that sells with conviction than a bigger one that sells with apologies.\" Then meet the AE one-on-one.", type: "recover" }
    ],
    outcomes: {
      jeopardize: { text: "You kept the AE temporarily — she stayed three more months, then left anyway. The pipeline deals closed at discounted rates and set the new floor. Your board called a special meeting about margin compression. Six months later you brought in a new VP of Sales — an expensive admission you should have held the line.", metrics: ["AE retained: 3 months", "Margin floor: Lowered", "Board confidence: Eroded"] },
      stabilize: { text: "Meeting the AE first was smart — she felt heard and agreed to give it another quarter. But without a public reset, the cultural damage continued quietly. The three deals closed at a mix of standard and discounted pricing (the reps freelanced). You avoided a crisis but didn't fix the root cause. The same conversation will happen next quarter.", metrics: ["AE: Stayed (for now)", "Culture: Unchanged", "Problem: Deferred"] },
      recover: { text: "Two reps quit in the first week — the ones who relied on discounts. Good. The remaining team rallied. Your best AE stayed because she said: \"That's the first time a CEO admitted a mistake and actually fixed it.\" By end of quarter, revenue was flat and margin was up 18%.", metrics: ["Team: Leaner, stronger", "Margin: +18%", "Trust restored: Yes"] }
    },
    insight: "The private conversation buys time but not change. The matching game delays the inevitable. <strong>Cultural damage compounds faster than revenue damage. The cost of recovering a broken sales culture is 10x the cost of protecting it.</strong>"
  },
  p2_from_reluctant: {
    context: "Your board respects the 82% — but your largest investor calls privately: \"I appreciate the discipline. But three quarters in a row of missing quota and I'm going to push for a new sales leader. The market doesn't reward discipline if the number doesn't follow.\"",
    prompt: "The investor just put you on a clock. How do you respond?",
    choices: [
      { letter: "A", text: "Respond to the investor: \"I hear you. The number will follow. Here's why — \" and walk them through pipeline quality, deal velocity, and retention data. Then set a specific milestone: hit 95% next quarter with zero discounts.", type: "compound" },
      { letter: "B", text: "Quietly tell your VP of Sales to get more aggressive. Not discounts exactly, but faster follow-ups, more urgency in messaging, shorter trial periods. Tighten the screws without technically compromising pricing.", type: "jeopardize" },
      { letter: "C", text: "Acknowledge the pressure honestly: \"I understand the concern. Let me put together a 90-day plan that shows how our pipeline quality translates to acceleration.\" Then present a detailed forecast with leading indicators, not just revenue.", type: "maintain" }
    ],
    outcomes: {
      compound: { text: "The investor listened. Your pipeline data showed average deal size up 35%, churn near zero, and NRR at 115%. You set a milestone: 95% next quarter, zero discounts. You hit 102%. When you raised your Series B, that investor told the new lead: \"This CEO has the rarest quality — they don't panic.\" Worth ten points on your valuation.", metrics: ["Investor: Aligned", "Next Q quota: 102%", "Valuation impact: +10pts"] },
      jeopardize: { text: "Your VP received a confusing signal: hold price but create urgency. The team interpreted this as \"pressure people but don't discount\" — pushy and rigid. The worst combination. Close rates dropped further. Two prospects churned from the pipeline. You sacrificed the reluctant posture without gaining volume.", metrics: ["Close rate: Down", "Pipeline: Shrinking", "Posture: Confused"] },
      maintain: { text: "The 90-day plan was professional and the investor appreciated the transparency. But a plan is a promise to deliver later, not evidence of conviction now. The investor said: \"Fine, let's see.\" You bought three months but didn't change the dynamic. You're still on their clock — just with a longer fuse.", metrics: ["Investor: Patient", "Clock: Extended", "Dynamic: Unchanged"] }
    },
    insight: "The 90-day plan is the safe corporate move. The urgency pivot betrays your posture. <strong>The reluctant seller's real advantage shows up when the pressure is real and they hold anyway — with data, not deflection.</strong>"
  }
},

{
  number: 5, label: "THE EXIT", title: "The Acquisition Offer",
  p1_context: "A strategic acquirer wants your company. Offer: 5.2x revenue — strong, above market. You're profitable, growing, debt-free. The acquirer's CEO calls: <strong>\"We'd love to move quickly. Can we get an LOI signed this week?\"</strong>",
  p1_prompt: "How do you respond?",
  p1_choices: [
    { letter: "A", text: "\"We're interested and I want to be respectful of your timeline. Let me get the LOI reviewed by our counsel this week, and we can have a conversation about terms by Friday. I want to make sure we both feel good about this.\"", type: "moderate" },
    { letter: "B", text: "\"We're very excited. Let me get my team aligned and we'll turn the LOI around by Thursday. We don't want to lose momentum.\"", type: "eager" },
    { letter: "C", text: "\"I appreciate the offer. But we're genuinely happy running this business. I'd need a few weeks to discuss with my board whether selling even makes sense. If it does, we'll engage seriously.\"", type: "reluctant" }
  ],
  p1_outcomes: {
    moderate: { text: "Professional and measured. The acquirer respected the pace. But by engaging with their LOI on their timeline, you implicitly accepted their framing. During diligence, they renegotiated two terms — sensing you were engaged but not leveraged. Final: 4.8x. Decent, not great.", metrics: ["Offered: 5.2x", "Final: 4.8x", "Terms: Mostly theirs"] },
    eager: { text: "You signed Thursday. During diligence, three renegotiation points each shaved the multiple. Final: 4.1x. They knew you wanted to sell. Two years in an earnout feeling like you sold too cheap.", metrics: ["Offered: 5.2x", "Final: 4.1x", "Regret: High"] },
    reluctant: { text: "The acquirer spent two weeks worrying you'd say no. When you came back open to exploring, they asked what it would take. You said 6.5x. They countered 5.8x. Closed at 6.1x. The acquirer told your advisor: \"That's exactly why the company is worth what it's worth.\"", metrics: ["Offered: 5.2x", "Final: 6.1x", "Terms: Yours"] }
  },
  p1_insight: "Moving fast on their timeline feels professional. But speed is the acquirer's weapon, not yours. <strong>The ability to walk away from a life-changing number is what turns a good exit into a great one.</strong>",

  p2_from_eager: {
    context: "You're three months into the earnout at 4.1x. The acquirer has restructured your team, replaced your VP of Engineering, and is pushing aggressive integration milestones. Your earnout — 30% of total — depends on hitting targets that feel unrealistic.",
    prompt: "Your earnout is at risk and you're losing control. What do you do?",
    choices: [
      { letter: "A", text: "Request a meeting with the acquirer's CEO. Say: \"The milestones as structured don't reflect integration reality. I'd like to propose revised targets. If we can't align, I'd rather discuss an early buyout of the earnout at a fair discount.\"", type: "recover" },
      { letter: "B", text: "Put your head down and grind. Hit every milestone no matter what it costs. The earnout is too much money to leave on the table. Complain later.", type: "jeopardize" },
      { letter: "C", text: "Document everything — the changed conditions, the unrealistic targets, the unilateral decisions. Build your case quietly. If the earnout fails, you'll have leverage for a legal claim or renegotiation.", type: "stabilize" }
    ],
    outcomes: {
      recover: { text: "The acquirer's CEO was surprised — most founders just grind silently. Your willingness to name the problem impressed them. They restructured two milestones and offered an early buyout at 80 cents on the dollar. You walked away 14 months early with 85% of total deal value, sanity intact.", metrics: ["Earnout: 85% captured", "Time saved: 14 months", "Reputation: Intact"] },
      jeopardize: { text: "You burned out in month nine. Hit two of four milestones. The acquirer paid 60% of the earnout — the minimum. Your best people had already left. You spent 18 months grinding for an outcome worse than if you'd negotiated on the way in.", metrics: ["Earnout: 60% paid", "Team: Departed", "Years lost: 1.5"] },
      stabilize: { text: "You built a solid paper trail. But documentation without conversation is passive aggression in a corporate marriage. The acquirer sensed your disengagement and started routing decisions around you. When earnout time came, your documentation helped you negotiate 70% — better than grinding, but you spent a year building a legal case instead of building a company or building an exit.", metrics: ["Earnout: 70% paid", "Relationship: Adversarial", "Energy: Wasted on CYA"] }
    },
    insight: "Grinding silently is the default. Documenting is the lawyer's move. <strong>The real recovery requires naming the problem out loud — the same posture that would have gotten you a better deal in the first place.</strong>"
  },
  p2_from_reluctant: {
    context: "You closed at 6.1x with favorable terms. The acquirer's CEO calls: \"We'd like you to stay on for two years as division president. The comp is generous: $400K base, full bonus, and a $2M equity grant. We think you're the right person to scale this.\"",
    prompt: "They want you to stay. It's a lot of money. What do you do?",
    choices: [
      { letter: "A", text: "\"That's incredibly generous. I'm in. Let's do it.\" Sign immediately and start the new chapter.", type: "jeopardize" },
      { letter: "B", text: "\"I'm interested, but I want to take a week to think about it. Can I review the full offer details and come back with any questions? I want to make sure this is right for both of us.\"", type: "maintain" },
      { letter: "C", text: "\"I'm genuinely interested, but I need to understand the role before I commit. What does success look like in year one? What authority will I actually have? And what happens if our visions diverge? I'd rather set clear expectations now than discover misalignment later.\"", type: "compound" }
    ],
    outcomes: {
      jeopardize: { text: "Six months in, \"division president\" meant \"execute the parent company's roadmap.\" Your product vision was overridden. The equity had a four-year vest with a one-year cliff. You left after 14 months, forfeiting 65% of the equity. The generous offer was a golden cage.", metrics: ["Equity forfeited: 65%", "Autonomy: None", "Duration: 14 months"] },
      maintain: { text: "Taking a week was prudent. You reviewed the details, negotiated a few minor improvements, and signed. But you didn't ask the structural questions — about authority, vision alignment, or exit conditions. Eight months in, the same problems emerged. You had better comp but the same lack of clarity. The week of thinking was about the contract, not the role.", metrics: ["Comp: Improved slightly", "Clarity: Same", "Problems: Delayed 8 months"] },
      compound: { text: "Your questions uncovered a fundamental disagreement: they wanted to integrate your product; you wanted to run it independently. You negotiated: 18 months instead of 24, a specific autonomy clause, and an accelerated vest if they changed strategic direction. You completed the full 18 months, earned 100% of the equity, and left on your own terms.", metrics: ["Equity: 100% vested", "Autonomy: Protected", "Exit: On your terms"] }
    },
    insight: "Signing fast is the trap. Taking time to review the contract is better but still surface-level. <strong>The reluctant seller's final move is the same as their first: ask the question everyone else is afraid to ask, before the ink is dry.</strong>"
  }
}
];

// ═══════════════════════════════════════════
//  STATE
// ═══════════════════════════════════════════
let currentScenario = 0;
let phase = 1; // 1 or 2
let p1Choices = [];  // "eager" or "reluctant" per scenario
let p2Choices = [];  // "compound"/"recover"/"jeopardize" per scenario

function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function updateProgress() {
  const dots = document.getElementById('progress-dots');
  const label = document.getElementById('progress-step-label');
  dots.innerHTML = scenarios.map((s, i) => {
    let cls = 'progress-dot';
    if (i < currentScenario) cls += ' done';
    else if (i === currentScenario && phase === 2) cls += ' half';
    else if (i === currentScenario) cls += ' active';
    return `<div class="${cls}"></div>`;
  }).join('');
  label.textContent = scenarios[currentScenario]?.label || '';
}

function startSimulator() {
  currentScenario = 0;
  phase = 1;
  p1Choices = [];
  p2Choices = [];
  document.getElementById('progress-capsule').style.display = 'flex';
  document.getElementById('nav-pill').style.display = 'flex';
  updateProgress();
  renderPhase1();
  showScreen('screen-scenario');
}

function renderPhase1() {
  const s = scenarios[currentScenario];
  document.getElementById('screen-scenario').innerHTML = `
    <div class="scenario-card">
      <div class="scenario-header">
        <div class="scenario-number">${s.number}</div>
        <div>
          <div class="scenario-label">${s.label}</div>
          <div class="scenario-title">${s.title}</div>
        </div>
      </div>
      <div class="scenario-body">
        <div class="phase-badge phase-1"><span class="dot"></span> Phase 1 &mdash; Opening Move</div>
        <div class="scenario-context">${s.p1_context}</div>
        <div class="scenario-prompt">${s.p1_prompt}</div>
        <div class="choices">
          ${s.p1_choices.map((c, i) => `
            <button class="choice-btn" onclick="makeP1Choice(${i})">
              <div class="choice-letter">${c.letter}</div>
              <div class="choice-text">${c.text}</div>
            </button>
          `).join('')}
        </div>
        <div id="outcome-area"></div>
      </div>
    </div>
  `;
  showScreen('screen-scenario');
}

function makeP1Choice(idx) {
  const s = scenarios[currentScenario];
  const chosen = s.p1_choices[idx];
  p1Choices.push(chosen.type);

  document.querySelectorAll('.choice-btn').forEach((btn, i) => {
    btn.onclick = null; btn.style.cursor = 'default';
    if (i === idx) {
      btn.classList.add('choice-selected');
      btn.style.borderColor = chosen.type === 'reluctant' ? 'rgba(52,199,89,0.4)' : (chosen.type === 'moderate' ? 'rgba(0,122,255,0.4)' : 'rgba(255,59,48,0.4)');
      btn.style.background = chosen.type === 'reluctant' ? 'rgba(52,199,89,0.08)' : (chosen.type === 'moderate' ? 'rgba(0,122,255,0.08)' : 'rgba(255,59,48,0.08)');
    } else { btn.style.opacity = '0.35'; btn.style.transform = 'scale(0.98)'; }
  });

  const area = document.getElementById('outcome-area');
  const types = ['eager', 'moderate', 'reluctant'];
  const typeLabels = { eager: '✗ Eager', moderate: '◆ Moderate', reluctant: '✓ Reluctant' };
  
  let outcomeHTML = '<div class="outcome-panel">';
  // Show chosen first
  outcomeHTML += `
    <div class="outcome-box ${chosen.type}">
      <div class="outcome-tag">${typeLabels[chosen.type]} — Your Choice</div>
      <div class="outcome-text">${s.p1_outcomes[chosen.type].text}</div>
      <div class="outcome-metrics">${s.p1_outcomes[chosen.type].metrics.map(m => '<div class="outcome-metric">' + m + '</div>').join('')}</div>
    </div>`;
  // Show others
  types.filter(t => t !== chosen.type).forEach(t => {
    outcomeHTML += `
    <div class="outcome-box ${t}">
      <div class="outcome-tag">${typeLabels[t]} path</div>
      <div class="outcome-text">${s.p1_outcomes[t].text}</div>
      <div class="outcome-metrics">${s.p1_outcomes[t].metrics.map(m => '<div class="outcome-metric">' + m + '</div>').join('')}</div>
    </div>`;
  });
  outcomeHTML += `
    <div class="insight-capsule">
      <div class="insight-icon">&#128161;</div>
      <div class="insight-text">${s.p1_insight}</div>
    </div>
    <div class="continue-row">
      <button class="btn-glass" onclick="goToPhase2()">
        What Happens Next <span class="arrow">&rarr;</span>
      </button>
    </div>
  </div>`;
  area.innerHTML = outcomeHTML;
  area.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function goToPhase2() {
  phase = 2;
  updateProgress();
  const s = scenarios[currentScenario];
  const p1Type = p1Choices[currentScenario];
  const p2 = p1Type === 'eager' ? s.p2_from_eager : s.p2_from_reluctant;

  document.getElementById('screen-scenario').innerHTML = `
    <div class="scenario-card">
      <div class="scenario-header">
        <div class="scenario-number">${s.number}</div>
        <div>
          <div class="scenario-label">${s.label}</div>
          <div class="scenario-title">${s.title}</div>
        </div>
      </div>
      <div class="scenario-body">
        <div class="phase-divider">
          <div class="phase-divider-line"></div>
          <div class="phase-divider-label">${p1Type === 'eager' ? 'Can You Recover?' : (p1Type === 'moderate' ? 'Can You Commit?' : 'Can You Compound?')}</div>
          <div class="phase-divider-line"></div>
        </div>
        <div class="phase-badge phase-2"><span class="dot"></span> Phase 2 &mdash; The Follow-Through</div>
        <div class="scenario-context">${p2.context}</div>
        <div class="scenario-prompt">${p2.prompt}</div>
        <div class="choices">
          ${p2.choices.map((c, i) => `
            <button class="choice-btn" onclick="makeP2Choice(${i})">
              <div class="choice-letter">${c.letter}</div>
              <div class="choice-text">${c.text}</div>
            </button>
          `).join('')}
        </div>
        <div id="outcome-area-2"></div>
      </div>
    </div>
  `;
  showScreen('screen-scenario');
}

function makeP2Choice(idx) {
  const s = scenarios[currentScenario];
  const p1Type = p1Choices[currentScenario];
  const p2 = p1Type === 'eager' ? s.p2_from_eager : s.p2_from_reluctant;
  const chosen = p2.choices[idx];
  p2Choices.push(chosen.type);

  document.querySelectorAll('.choice-btn').forEach((btn, i) => {
    btn.onclick = null; btn.style.cursor = 'default';
    if (i === idx) {
      btn.classList.add('choice-selected');
      const isGood = chosen.type === 'compound' || chosen.type === 'recover' || chosen.type === 'stabilize' || chosen.type === 'maintain';
      btn.style.borderColor = isGood ? (chosen.type === 'stabilize' || chosen.type === 'maintain' ? 'rgba(0,122,255,0.4)' : 'rgba(52,199,89,0.4)') : 'rgba(255,59,48,0.4)';
      btn.style.background = isGood ? (chosen.type === 'stabilize' || chosen.type === 'maintain' ? 'rgba(0,122,255,0.08)' : 'rgba(52,199,89,0.08)') : 'rgba(255,59,48,0.08)';
    } else { btn.style.opacity = '0.35'; btn.style.transform = 'scale(0.98)'; }
  });

  const area = document.getElementById('outcome-area-2');
  const p2Types = p2.choices.map(c => c.type);
  const tagLabels = { compound: '▲ Compounded', recover: '↻ Recovered', jeopardize: '▼ Jeopardized', stabilize: '◆ Stabilized', maintain: '◆ Maintained' };
  
  const isLast = currentScenario === scenarios.length - 1;
  
  let outcomeHTML = '<div class="outcome-panel">';
  // Show chosen first
  outcomeHTML += `
    <div class="outcome-box ${chosen.type}">
      <div class="outcome-tag">${tagLabels[chosen.type] || chosen.type} — Your Choice</div>
      <div class="outcome-text">${p2.outcomes[chosen.type].text}</div>
      <div class="outcome-metrics">${p2.outcomes[chosen.type].metrics.map(m => '<div class="outcome-metric">' + m + '</div>').join('')}</div>
    </div>`;
  // Show others
  p2Types.filter(t => t !== chosen.type).forEach(t => {
    outcomeHTML += `
    <div class="outcome-box ${t}">
      <div class="outcome-tag">${tagLabels[t] || t} path</div>
      <div class="outcome-text">${p2.outcomes[t].text}</div>
      <div class="outcome-metrics">${p2.outcomes[t].metrics.map(m => '<div class="outcome-metric">' + m + '</div>').join('')}</div>
    </div>`;
  });
  outcomeHTML += `
    <div class="insight-capsule">
      <div class="insight-icon">&#128161;</div>
      <div class="insight-text">${p2.insight}</div>
    </div>
    <div class="continue-row">
      <button class="btn-glass" onclick="${isLast ? 'showResults()' : 'nextScenario()'}">
        ${isLast ? 'See Results' : 'Next Scenario'} <span class="arrow">&rarr;</span>
      </button>
    </div>
  </div>`;
  area.innerHTML = outcomeHTML;
  area.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function nextScenario() {
  currentScenario++;
  phase = 1;
  updateProgress();
  renderPhase1();
}

// ═══════════════════════════════════════════
//  INTELLIGENCE ENGINE
// ═══════════════════════════════════════════

// Chapter mapping: links scenario labels to PDF guide chapters
const chapterMap = {
  DISCOVERY: { chapter: "Ch. 3 — Discovery", page: "pp. 5–6", desc: "How to deepen questions instead of answering them" },
  OUTREACH: { chapter: "Ch. 4 — Business Development", page: "pp. 7–9", desc: "Emails that feel like gifts, not invoices" },
  NEGOTIATION: { chapter: "Ch. 6 — Negotiation & Closing", page: "pp. 11–12", desc: "Never negotiate against yourself" },
  LEADERSHIP: { chapter: "Ch. 7 — Running a Sales Org", page: "pp. 13–14", desc: "Why the CEO's posture sets the culture" },
  "THE EXIT": { chapter: "Ch. 8 — Selling Your Company", page: "pp. 15–17", desc: "The lemonade stand at the highest stakes" }
};

// Vulnerability pattern detection
function detectPatterns() {
  const patterns = { vulnerabilities: [], strengths: [] };

  // Check for "collapses under escalation" — good P1 but bad P2
  const collapseCount = p1Choices.reduce((n, c, i) => n + (c === 'reluctant' && p2Choices[i] === 'jeopardize' ? 1 : 0), 0);
  if (collapseCount >= 2) {
    patterns.vulnerabilities.push({
      name: "Escalation Collapse",
      desc: "You open with restraint but abandon it when stakes rise. You made the reluctant move " + p1Choices.filter(c => c === 'reluctant').length + " times in Phase 1, but jeopardized " + collapseCount + " of those gains in Phase 2. The hardest part isn't starting reluctant — it's staying reluctant when pressure mounts.",
      icon: "&#9888;&#65039;"
    });
  }

  // Check for "consistent eagerness" — eager in both phases
  const doubleEager = p1Choices.reduce((n, c, i) => n + (c === 'eager' && p2Choices[i] === 'jeopardize' ? 1 : 0), 0);
  if (doubleEager >= 2) {
    patterns.vulnerabilities.push({
      name: "Double-Down Reflex",
      desc: "When your eager opening creates problems, your instinct is to push harder rather than reset. You doubled down " + doubleEager + " times. The most expensive pattern in sales is solving a bad approach with more of the same approach.",
      icon: "&#128260;"
    });
  }

  // Check for late-game weakness — good early, bad on scenarios 4-5
  const lateEager = [3, 4].filter(i => p1Choices[i] === 'eager' || p2Choices[i] === 'jeopardize').length;
  if (lateEager >= 2 && p1Choices.slice(0, 3).filter(c => c === 'reluctant').length >= 2) {
    patterns.vulnerabilities.push({
      name: "High-Stakes Flinch",
      desc: "You hold the reluctant posture well in tactical scenarios (discovery, outreach) but crack when the stakes become existential (leadership, exits). This is common — and it's exactly where the biggest money is lost.",
      icon: "&#128200;"
    });
  }

  // Check for recovery ability
  const recoveryCount = p2Choices.filter(c => c === 'recover').length;
  if (recoveryCount >= 2) {
    patterns.strengths.push({
      name: "Recovery Intelligence",
      desc: "You recovered " + recoveryCount + " times after eager openings. Most sellers double down on mistakes — you course-correct. This is a rare and valuable skill. Your next evolution: making the reluctant move first so recovery isn't needed.",
      icon: "&#128161;"
    });
  }

  // Check for perfect compounding
  const compoundCount = p2Choices.filter(c => c === 'compound').length;
  if (compoundCount >= 3) {
    patterns.strengths.push({
      name: "Compound Machine",
      desc: "You compounded gains " + compoundCount + " out of 5 times. When things go well, you don't get greedy — you deepen the advantage. This is the hallmark of elite sellers who build exponential deal value.",
      icon: "&#9889;"
    });
  }

  // Check for full reluctant consistency
  const fullReluctant = p1Choices.reduce((n, c, i) => n + (c === 'reluctant' && p2Choices[i] === 'compound' ? 1 : 0), 0);
  if (fullReluctant >= 3) {
    patterns.strengths.push({
      name: "Unshakeable Posture",
      desc: "You went reluctant and then compounded " + fullReluctant + " times. That's not just knowing the right answer — it's maintaining it through two phases of pressure. This consistency is what separates theory from practice.",
      icon: "&#127942;"
    });
  }

  // Fallback vulnerability if none found
  if (patterns.vulnerabilities.length === 0 && p1Choices.filter(c => c === 'eager').length > 0) {
    const eagerIdx = p1Choices.indexOf('eager');
    patterns.vulnerabilities.push({
      name: "Selective Eagerness",
      desc: "Your one clear vulnerability surfaced in the " + scenarios[eagerIdx].label.toLowerCase() + " scenario. Even one eager move in a deal can undo five reluctant ones. Awareness is the first step.",
      icon: "&#128269;"
    });
  }

  return patterns;
}

// Build reading path based on choices
function buildReadingPath() {
  const path = [];
  scenarios.forEach((s, i) => {
    const p1Bad = p1Choices[i] === 'eager'; const p1Mid = p1Choices[i] === 'moderate';
    const p2Bad = p2Choices[i] === 'jeopardize';
    const ch = chapterMap[s.label];
    const p2Mid = p2Choices[i] === 'stabilize' || p2Choices[i] === 'maintain';
    if (p1Bad && p2Bad) {
      path.push({ ...ch, priority: 'high', tag: 'start-here', tagLabel: 'Start Here', reason: 'Eager opening + jeopardized follow-through' });
    } else if (p1Bad || p2Bad) {
      path.push({ ...ch, priority: 'high', tag: 'start-here', tagLabel: 'Start Here', reason: p1Bad ? 'Eager opening move' : 'Jeopardized in Phase 2' });
    } else if (p1Mid || p2Mid) {
      path.push({ ...ch, priority: 'medium', tag: 'review', tagLabel: 'Review', reason: 'Good instincts, room to sharpen' });
    } else {
      path.push({ ...ch, priority: 'low', tag: 'strong', tagLabel: 'Strong', reason: 'Solid performance — reinforce' });
    }
  });
  // Sort: high first, then medium, then low
  path.sort((a, b) => {
    const order = { high: 0, medium: 1, low: 2 };
    return order[a.priority] - order[b.priority];
  });
  return path;
}

// Generate profile card insight
function getProfileInsight(pct, patterns) {
  if (patterns.vulnerabilities.length > 0) {
    return `Your biggest growth area: <strong>${patterns.vulnerabilities[0].name}</strong>. Focus your reading on the chapters flagged below — they map directly to where you cracked under pressure.`;
  } else if (patterns.strengths.length > 0) {
    return `Your superpower: <strong>${patterns.strengths[0].name}</strong>. You don't just understand reluctance — you sustain it. Share this profile and challenge someone else to match it.`;
  }
  return `You show a balanced approach with room to sharpen your consistency under pressure.`;
}

function showResults() {
  document.getElementById('progress-capsule').style.display = 'none';
  document.getElementById('nav-pill').style.display = 'none';

  // Score calculation
  let score = 0;
  const maxScore = scenarios.length * 20;
  p1Choices.forEach(c => { if (c === 'reluctant') score += 10; else if (c === 'moderate') score += 5; });
  p2Choices.forEach(c => { if (c === 'compound') score += 10; else if (c === 'recover') score += 7; else if (c === 'stabilize') score += 4; else if (c === 'maintain') score += 5; });
  const pct = Math.round((score / maxScore) * 100);

  const archetypes = [
    { min: 0, max: 20, name: "The Eager Closer", desc: "Your instincts drive you toward action, pitching, and urgency at nearly every turn — and when things go wrong, you double down rather than reset. The reluctant posture is foreign to you right now, but that also means the upside of learning it is enormous." },
    { min: 21, max: 40, name: "The Recovering Seller", desc: "You make eager moves but show an ability to course-correct when the consequences become clear. That self-awareness is rare. Your next step: learn to make the reluctant choice first, so you don't need to recover." },
    { min: 41, max: 55, name: "The Split Operator", desc: "You toggle between postures depending on pressure. In calm moments, you hold the line beautifully. When stakes rise, eagerness creeps in. Identify your triggers — that's where the real growth is." },
    { min: 56, max: 75, name: "The Composed Seller", desc: "You lead with restraint and know how to compound when things go well. Your edge now is consistency — applying the same posture under board pressure, during exits, and in moments where even composed sellers flinch." },
    { min: 76, max: 100, name: "The Reluctant Seller", desc: "You don't just understand the posture — you sustain it through escalation, pressure, and temptation. You compound gains, recover from mistakes, and never let eagerness infect your follow-through. This is the rarest profile in sales." }
  ];

  const arch = archetypes.find(a => pct >= a.min && pct <= a.max);
  const circumference = 2 * Math.PI * 68;
  const offset = circumference - (pct / 100) * circumference;
  const patterns = detectPatterns();
  const readingPath = buildReadingPath();
  const profileInsight = getProfileInsight(pct, patterns);
  const today = new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });

  const p2Labels = { compound: '&#9650; Compounded', recover: '&#8635; Recovered', jeopardize: '&#9660; Jeopardized', stabilize: '&#9670; Stabilized', maintain: '&#9670; Maintained' };
  const dnaTypeLabels = { reluctant: 'Reluctant', eager: 'Eager', moderate: 'Moderate', compound: 'Compound', recover: 'Recover', jeopardize: 'Jeopardize', stabilize: 'Stabilize', maintain: 'Maintain' };
  const dnaPipLabels = { reluctant: 'R', eager: 'E', moderate: 'M', compound: 'C+', recover: 'RC', jeopardize: 'J', stabilize: 'ST', maintain: 'MT' };

  // Build all 10 DNA pips (interleaved P1/P2)
  const allChoices = [];
  scenarios.forEach((s, i) => {
    allChoices.push({ type: p1Choices[i], phase: 1, label: s.label });
    allChoices.push({ type: p2Choices[i], phase: 2, label: s.label });
  });

  document.getElementById('screen-results').innerHTML = `
    <div class="results-hero"><h2>Your Results</h2></div>

    <!-- SCORE RING -->
    <div class="score-ring-container">
      <div class="score-ring">
        <svg viewBox="0 0 160 160">
          <circle class="score-ring-bg" cx="80" cy="80" r="68"/>
          <circle class="score-ring-fill" cx="80" cy="80" r="68"
            stroke-dasharray="${circumference}" stroke-dashoffset="${circumference}" id="ring-anim"/>
        </svg>
        <div class="score-ring-text">
          <div class="score-ring-number" id="score-anim">0</div>
          <div class="score-ring-label">Reluctant</div>
        </div>
      </div>
    </div>

    <!-- ARCHETYPE -->
    <div class="archetype-card">
      <div class="archetype-name">${arch.name}</div>
      <div class="archetype-desc">${arch.desc}</div>
    </div>

    <!-- DECISION DNA STRAND -->
    <div class="dna-section">
      <div class="dna-section-title">Your Decision DNA</div>
      <div class="dna-strand-card">
        ${scenarios.map((s, i) => `
          <div class="dna-strand-row">
            <div class="dna-scenario-label">
              <div class="dna-scenario-num">S${s.number}</div>
              <div class="dna-scenario-name">${s.label}</div>
            </div>
            <div class="dna-phases">
              <div class="dna-node ${p1Choices[i]} dna-node-animate" style="animation-delay:${i * 0.12}s">
                <div class="dna-node-phase">P1</div>
                <div class="dna-node-type">${dnaTypeLabels[p1Choices[i]]}</div>
              </div>
              <div class="dna-node ${p2Choices[i]} dna-node-animate" style="animation-delay:${i * 0.12 + 0.06}s">
                <div class="dna-node-phase">P2</div>
                <div class="dna-node-type">${dnaTypeLabels[p2Choices[i]]}</div>
              </div>
            </div>
          </div>
        `).join('')}
      </div>
    </div>

    <!-- VULNERABILITY & STRENGTH PATTERNS -->
    ${patterns.vulnerabilities.length > 0 ? `
    <div class="dna-section">
      <div class="dna-section-title">Vulnerability Detected</div>
      ${patterns.vulnerabilities.map(v => `
        <div class="vulnerability-card">
          <div class="vuln-header">
            <div class="vuln-icon">${v.icon}</div>
            <div class="vuln-title">${v.name}</div>
          </div>
          <div class="vuln-body">${v.desc}</div>
        </div>
      `).join('')}
    </div>
    ` : ''}

    ${patterns.strengths.length > 0 ? `
    <div class="dna-section">
      <div class="dna-section-title">Strength Identified</div>
      ${patterns.strengths.map(s => `
        <div class="vulnerability-card strength">
          <div class="vuln-header">
            <div class="vuln-icon">${s.icon}</div>
            <div class="vuln-title">${s.name}</div>
          </div>
          <div class="vuln-body">${s.desc}</div>
        </div>
      `).join('')}
    </div>
    ` : ''}

    <!-- PERSONALIZED READING PATH -->
    <div class="dna-section">
      <div class="dna-section-title">Your Reading Path</div>
      <div class="chapter-map-card">
        <div class="chapter-map-header">
          <div class="chapter-map-title">The Reluctant Seller — Guide</div>
          <div class="chapter-map-sub">Prioritized based on your specific decision pattern</div>
        </div>
        ${readingPath.map(ch => `
          <div class="chapter-row">
            <div class="chapter-priority ${ch.priority}"></div>
            <div class="chapter-info">
              <div class="chapter-name">${ch.chapter}</div>
              <div class="chapter-reason">${ch.reason} &middot; ${ch.page}</div>
            </div>
            <div class="chapter-tag ${ch.tag}">${ch.tagLabel}</div>
          </div>
        `).join('')}
      </div>
    </div>

    <!-- SHAREABLE PROFILE CARD -->
    <div class="dna-section">
      <div class="dna-section-title">Your Seller Profile Card</div>
      <div class="profile-card-container">
        <div class="profile-card" id="profile-card">
          <div class="profile-card-badge">&#127819; Seller Profile</div>
          <div class="profile-card-archetype">${arch.name}</div>
          <div class="profile-card-score">Reluctance Score: ${pct}% &middot; ${score}/${maxScore} pts</div>
          <div class="profile-card-dna">
            ${allChoices.map(c => `<div class="profile-dna-pip ${c.type}">${dnaPipLabels[c.type]}</div>`).join('')}
          </div>
          <div class="profile-card-insight">${profileInsight}</div>
          <div class="profile-card-footer">
            <div class="profile-card-brand">The Reluctant Seller</div>
            <div class="profile-card-date">${today}</div>
          </div>
        </div>
        <div class="profile-card-actions">
          <button class="profile-action-btn" onclick="downloadProfileCard()">&#128247; Save as Image</button>
          <button class="profile-action-btn" onclick="shareProfileTwitter()">&#120143; Share on X</button>
          <button class="profile-action-btn" onclick="shareProfileLinkedIn()">in Share on LinkedIn</button>
        </div>
      </div>
    </div>

    <!-- ORIGINAL BREAKDOWN (now below the new sections) -->
    <div class="breakdown-card">
      <div class="breakdown-header">Full Decision Breakdown</div>
      ${scenarios.map((s, i) => `
        <div class="breakdown-row">
          <div>
            <div class="breakdown-label">${s.label}: ${s.title}</div>
            <div class="breakdown-sub">Phase 1 &rarr; Phase 2</div>
          </div>
          <div class="breakdown-badges">
            <div class="breakdown-result ${p1Choices[i]}">${p1Choices[i] === 'reluctant' ? '&#10003; Reluctant' : (p1Choices[i] === 'moderate' ? '&#9670; Moderate' : '&#10007; Eager')}</div>
            <div class="breakdown-result ${p2Choices[i]}">${p2Labels[p2Choices[i]] || p2Choices[i]}</div>
          </div>
        </div>
      `).join('')}
    </div>

    <div class="glass-quote">
      <div class="emoji">&#127819;</div>
      <blockquote>"The best sales happen when the seller is not trying to sell. But the best careers happen when the seller can sustain that posture through every phase of the deal."</blockquote>
      <cite>The Reluctant Seller</cite>
    </div>

    <div class="cta-section">
      <h3>Get the Full Playbook</h3>
      <p>A comprehensive guide covering discovery, outreach, negotiation, sales leadership, and company exits.</p>
      <div class="cta-input-row">
        <input class="cta-input" type="email" id="cta-email" placeholder="Your email address" />
        <button class="cta-submit" onclick="handleCTA()">Send It</button>
      </div>
      <div class="cta-success" id="cta-success">&#10003; Check your inbox.</div>
    </div>
    <div class="share-row">
      <button class="share-btn" onclick="shareTwitter()">&#120143; Share on X</button>
      <button class="share-btn" onclick="shareLinkedIn()">in Share on LinkedIn</button>
      <button class="share-btn" onclick="copyLink()">&#128279; Copy Link</button>
      <button class="share-btn" onclick="startSimulator()">&#8634; Retake</button>
    </div>
  `;

  showScreen('screen-results');
  setTimeout(() => {
    document.getElementById('ring-anim').style.strokeDashoffset = offset;
    let counter = 0;
    const step = Math.max(1, Math.floor(pct / 40));
    const timer = setInterval(() => {
      counter += step;
      if (counter >= pct) { counter = pct; clearInterval(timer); }
      document.getElementById('score-anim').textContent = counter;
    }, 30);
  }, 300);
}

// ═══════════════════════════════════════════
//  PROFILE CARD SHARING
// ═══════════════════════════════════════════

function downloadProfileCard() {
  // Use html2canvas-style approach via SVG foreignObject
  const card = document.getElementById('profile-card');
  const cardRect = card.getBoundingClientRect();
  const w = cardRect.width * 2;
  const h = cardRect.height * 2;

  const canvas = document.createElement('canvas');
  canvas.width = w;
  canvas.height = h;
  const ctx = canvas.getContext('2d');

  // Draw gradient background
  const grad = ctx.createLinearGradient(0, 0, w * 0.6, h);
  grad.addColorStop(0, '#1B2A4A');
  grad.addColorStop(1, '#0F1B33');
  ctx.fillStyle = grad;
  ctx.roundRect(0, 0, w, h, 40);
  ctx.fill();

  // Draw content
  ctx.textBaseline = 'top';

  // Badge
  ctx.fillStyle = 'rgba(184,150,62,0.8)';
  ctx.font = `bold ${20}px -apple-system, Inter, sans-serif`;
  ctx.fillText('SELLER PROFILE', 56, 56);

  // Archetype name
  ctx.fillStyle = '#FFFFFF';
  ctx.font = `bold ${52}px -apple-system, Inter, sans-serif`;
  const archName = card.querySelector('.profile-card-archetype').textContent;
  ctx.fillText(archName, 56, 100);

  // Score
  ctx.fillStyle = 'rgba(255,255,255,0.5)';
  ctx.font = `${28}px -apple-system, Inter, sans-serif`;
  const scoreText = card.querySelector('.profile-card-score').textContent;
  ctx.fillText(scoreText, 56, 170);

  // DNA pips
  const pips = card.querySelectorAll('.profile-dna-pip');
  const pipColors = { reluctant: '#34C759', eager: '#FF3B30', compound: '#28A745', recover: '#FF9500', jeopardize: '#FF3B30' };
  const pipBgs = { reluctant: 'rgba(52,199,89,0.25)', eager: 'rgba(255,59,48,0.2)', compound: 'rgba(52,199,89,0.3)', recover: 'rgba(255,149,0,0.2)', jeopardize: 'rgba(255,59,48,0.22)' };
  const pipW = (w - 112 - (pips.length - 1) * 8) / pips.length;
  pips.forEach((pip, idx) => {
    const type = [...pip.classList].find(c => c !== 'profile-dna-pip');
    const x = 56 + idx * (pipW + 8);
    ctx.fillStyle = pipBgs[type] || 'rgba(255,255,255,0.1)';
    ctx.beginPath();
    ctx.roundRect(x, 220, pipW, 48, 10);
    ctx.fill();
    ctx.fillStyle = pipColors[type] || '#FFF';
    ctx.font = `bold ${16}px -apple-system, Inter, sans-serif`;
    ctx.textAlign = 'center';
    ctx.fillText(pip.textContent, x + pipW / 2, 232);
    ctx.textAlign = 'left';
  });

  // Divider
  ctx.fillStyle = 'rgba(255,255,255,0.08)';
  ctx.fillRect(56, 290, w - 112, 1);

  // Brand footer
  ctx.fillStyle = 'rgba(255,255,255,0.3)';
  ctx.font = `600 ${22}px -apple-system, Inter, sans-serif`;
  ctx.fillText('The Reluctant Seller', 56, h - 70);

  ctx.fillStyle = 'rgba(255,255,255,0.2)';
  ctx.font = `${20}px -apple-system, Inter, sans-serif`;
  ctx.textAlign = 'right';
  const dateText = card.querySelector('.profile-card-date').textContent;
  ctx.fillText(dateText, w - 56, h - 70);
  ctx.textAlign = 'left';

  // Download
  canvas.toBlob(blob => {
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'Reluctant_Seller_Profile.png';
    a.click();
    URL.revokeObjectURL(url);
  }, 'image/png');
}

function shareProfileTwitter() {
  const card = document.getElementById('profile-card');
  const archName = card.querySelector('.profile-card-archetype').textContent;
  const scoreText = card.querySelector('.profile-card-score').textContent;
  const text = encodeURIComponent(`My Reluctant Seller profile: ${archName} (${scoreText})\n\n10 branching sales decisions. 5 scenarios. Where do you crack under pressure?\n\nTake the simulator:`);
  window.open('https://twitter.com/intent/tweet?text=' + text, '_blank');
}

function shareProfileLinkedIn() {
  window.open('https://www.linkedin.com/sharing/share-offsite/?url=' + encodeURIComponent(window.location.href), '_blank');
}

function handleCTA() {
  const email = document.getElementById('cta-email').value;
  if (email && email.includes('@')) {
    document.getElementById('cta-success').style.display = 'block';
    document.querySelector('.cta-input-row').style.display = 'none';
    console.log('Lead captured:', email);
  }
}
function shareTwitter() {
  const text = encodeURIComponent("Just took The Reluctant Seller simulator — 10 branching decisions across 5 sales scenarios. Turns out the best strategy is not trying to sell.");
  window.open('https://twitter.com/intent/tweet?text=' + text, '_blank');
}
function shareLinkedIn() {
  window.open('https://www.linkedin.com/sharing/share-offsite/?url=' + encodeURIComponent(window.location.href), '_blank');
}
function copyLink() {
  navigator.clipboard.writeText(window.location.href).then(() => {
    const btn = event.target;
    const orig = btn.innerHTML;
    btn.textContent = '\u2713 Copied';
    setTimeout(() => { btn.innerHTML = orig; }, 2000);
  });
}
</script>
</body>
</html>
